Index: app/src/main/java/com/orion/orion/ViewPostActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.orion.orion;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.media.AudioManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.android.volley.VolleyLog;\r\nimport com.bumptech.glide.Glide;\r\nimport com.danikula.videocache.HttpProxyCacheServer;\r\nimport com.google.android.exoplayer2.DefaultLoadControl;\r\nimport com.google.android.exoplayer2.ExoPlaybackException;\r\nimport com.google.android.exoplayer2.ExoPlayerFactory;\r\nimport com.google.android.exoplayer2.LoadControl;\r\nimport com.google.android.exoplayer2.PlaybackParameters;\r\nimport com.google.android.exoplayer2.Player;\r\nimport com.google.android.exoplayer2.SimpleExoPlayer;\r\nimport com.google.android.exoplayer2.Timeline;\r\nimport com.google.android.exoplayer2.source.ExtractorMediaSource;\r\nimport com.google.android.exoplayer2.source.MediaSource;\r\nimport com.google.android.exoplayer2.source.TrackGroupArray;\r\nimport com.google.android.exoplayer2.trackselection.AdaptiveTrackSelection;\r\nimport com.google.android.exoplayer2.trackselection.DefaultTrackSelector;\r\nimport com.google.android.exoplayer2.trackselection.TrackSelectionArray;\r\nimport com.google.android.exoplayer2.trackselection.TrackSelector;\r\nimport com.google.android.exoplayer2.ui.PlayerView;\r\nimport com.google.android.exoplayer2.upstream.BandwidthMeter;\r\nimport com.google.android.exoplayer2.upstream.DataSource;\r\nimport com.google.android.exoplayer2.upstream.DefaultBandwidthMeter;\r\nimport com.google.android.exoplayer2.upstream.DefaultDataSourceFactory;\r\nimport com.google.android.exoplayer2.util.Util;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.reflect.TypeToken;\r\nimport com.ittianyu.bottomnavigationviewex.BottomNavigationViewEx;\r\nimport com.orion.orion.models.Comment;\r\nimport com.orion.orion.models.Photo;\r\nimport com.orion.orion.models.users;\r\nimport com.orion.orion.profile.profile;\r\nimport com.orion.orion.util.SNTPClient;\r\nimport com.orion.orion.util.SquareImageView;\r\n\r\nimport java.lang.reflect.Type;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.TimeZone;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport static android.view.View.GONE;\r\nimport static com.orion.orion.util.MyApplication.getProxy;\r\n\r\npublic class ViewPostActivity extends AppCompatActivity {\r\n    private static final String TAG = \"ViewPostFragment\";\r\n\r\n\r\n    //firebase\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseAuth.AuthStateListener mAuthListener;\r\n    private DatabaseReference myRef;\r\n    private FirebaseDatabase mFirebaseDatabase;\r\n    String currentUsername = \"\";\r\n\r\n    private Photo mphoto;\r\n    PlayerView playerView;\r\n    ProgressBar progressBar;\r\n    boolean play = true;\r\n    long currentPosition = 0;\r\n    SimpleExoPlayer simpleExoPlayer;\r\n\r\n    private final String mLikesString = \"\";\r\n    private String numberoflike = \"0\";\r\n    ArrayList<Comment> comments = new ArrayList<>();\r\n\r\n\r\n    private SquareImageView mPostImage, thumbnail, progress2;\r\n    private BottomNavigationViewEx bottomNavigationView;\r\n    private TextView mBackLabel, duration, mCaption, mUsername, mTimestamp, mLikes, mCommentnumber, mcredit, domain, promoteNum;\r\n    private ImageView mBackArrow, mEllipses, mStarYellow, mStarWhite, mProfileImage, mComment, promote, promoted, play2, mute, unmute;\r\n    //    SP\r\n    Gson gson;\r\n    SharedPreferences sp;\r\n    LinearLayout progress;\r\n    private users mCurrentUser;\r\n    private boolean likeByCurrentsUser2;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_view_post);\r\n\r\n        mPostImage = findViewById(R.id.post_image);\r\n        bottomNavigationView = findViewById(R.id.BottomNavViewBar);\r\n        mBackArrow = findViewById(R.id.backarrow);\r\n        mEllipses = findViewById(R.id.ivEllipses);\r\n        mStarWhite = findViewById(R.id.image_star);\r\n        mStarYellow = findViewById(R.id.image_star_yellow);\r\n        mProfileImage = findViewById(R.id.profile_photo1);\r\n        mBackLabel = findViewById(R.id.tvbacklabel1);\r\n        mCaption = findViewById(R.id.image_caption);\r\n        mUsername = findViewById(R.id.username1);\r\n        mTimestamp = findViewById(R.id.images_time);\r\n        mLikes = findViewById(R.id.likes_number);\r\n        mComment = findViewById(R.id.image_shoutout);\r\n        mCommentnumber = findViewById(R.id.comments_number);\r\n        mcredit = findViewById(R.id.credit);\r\n        promote = findViewById(R.id.promote);\r\n        promoted = findViewById(R.id.promoted);\r\n        domain = findViewById(R.id.domain12);\r\n        promoteNum = findViewById(R.id.promote_number);\r\n\r\n        progress = findViewById(R.id.pro);\r\n        progress2 = findViewById(R.id.progress);\r\n\r\n\r\n        play2 = findViewById(R.id.play);\r\n        mute = findViewById(R.id.mute);\r\n        unmute = findViewById(R.id.unmute);\r\n        playerView = findViewById(R.id.player_view);\r\n        progressBar = findViewById(R.id.progress_bar);\r\n        duration = findViewById(R.id.duration);\r\n        thumbnail = findViewById(R.id.thumbnail);\r\n\r\n\r\n//          Initialize SharedPreference variables\r\n        sp = getApplicationContext().getSharedPreferences(\"shared preferences\", Context.MODE_PRIVATE);\r\n        gson = new Gson();\r\n\r\n\r\n        Intent i = getIntent();\r\n        mphoto = i.getParcelableExtra(\"photo\");\r\n        comments = i.getParcelableArrayListExtra(\"comments\");\r\n\r\n        duration.setVisibility(View.GONE);\r\n\r\n\r\n        mEllipses.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                PopupMenu popupMenu = new PopupMenu(ViewPostActivity.this, mEllipses);\r\n                if (mphoto.getUi().equals(FirebaseAuth.getInstance().getCurrentUser().getUid())) {\r\n                    popupMenu.getMenuInflater().inflate(R.menu.post_menu, popupMenu.getMenu());\r\n                    popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\r\n                        @Override\r\n                        public boolean onMenuItemClick(MenuItem item) {\r\n                            Toast.makeText(ViewPostActivity.this, \"clicked\", Toast.LENGTH_SHORT).show();\r\n\r\n                            AlertDialog.Builder builder = new AlertDialog.Builder(ViewPostActivity.this);\r\n                            builder.setTitle(\"Delete\");\r\n                            builder.setMessage(\"Are you sure, you want to delete this Post?\");\r\n\r\n//                set buttons\r\n                            builder.setPositiveButton(\"Delete\", new DialogInterface.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(DialogInterface dialog, int which) {\r\n                                    Log.d(TAG, \"DeleteMessage: deleteing message\");\r\n                                    DeletePost();\r\n\r\n                                }\r\n                            });\r\n                            builder.setNegativeButton(\"No\", new DialogInterface.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(DialogInterface dialog, int which) {\r\n                                    dialog.dismiss();\r\n                                }\r\n                            });\r\n                            builder.create().show();\r\n\r\n                            return true;\r\n                        }\r\n                    });\r\n\r\n                    popupMenu.show();\r\n\r\n\r\n                } else {\r\n                    popupMenu.getMenuInflater().inflate(R.menu.post_menu_all, popupMenu.getMenu());\r\n                    popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\r\n                        @Override\r\n                        public boolean onMenuItemClick(MenuItem item) {\r\n                            Toast.makeText(ViewPostActivity.this, \"clicked\", Toast.LENGTH_SHORT).show();\r\n\r\n                            AlertDialog.Builder builder = new AlertDialog.Builder(ViewPostActivity.this);\r\n                            builder.setTitle(\"Report\");\r\n                            builder.setMessage(\"Are you sure, you want to Report this Post?\");\r\n\r\n//                set buttons\r\n                            builder.setPositiveButton(\"Report\", new DialogInterface.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(DialogInterface dialog, int which) {\r\n                                    Log.d(TAG, \"DeleteMessage: deleteing message\");\r\n                                    ReportPost();\r\n\r\n                                }\r\n                            });\r\n                            builder.setNegativeButton(\"No\", new DialogInterface.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(DialogInterface dialog, int which) {\r\n                                    dialog.dismiss();\r\n                                }\r\n                            });\r\n                            builder.create().show();\r\n\r\n                            return true;\r\n                        }\r\n                    });\r\n\r\n                    popupMenu.show();\r\n\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        if (mphoto.getTy().equals(\"photo\")) {\r\n\r\n            mPostImage.setVisibility(View.VISIBLE);\r\n            play2.setVisibility(View.GONE);\r\n            Glide.with(ViewPostActivity.this)\r\n                    .load(mphoto.getIp())\r\n                    .placeholder(R.drawable.load)\r\n                    .error(R.drawable.default_image2)\r\n                    .placeholder(R.drawable.load)\r\n                    .into(mPostImage);\r\n            playerView.setVisibility(GONE);\r\n\r\n        } else {\r\n            unmute.setVisibility(View.VISIBLE);\r\n            play2.setVisibility(View.VISIBLE);\r\n            mPostImage.setVisibility(View.GONE);\r\n            playerView.setVisibility(View.VISIBLE);\r\n        }\r\n\r\n//                   ***********get Video***********\r\n\r\n\r\n        DatabaseReference reference2 = FirebaseDatabase.getInstance().getReference();\r\n\r\n\r\n//                    get thumbnail\r\n        reference2\r\n                .child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.thumbnail))\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        if (snapshot.exists()) {\r\n                            Glide.with(ViewPostActivity.this)\r\n                                    .load(mphoto.getT())\r\n                                    .placeholder(R.drawable.load)\r\n                                    .error(R.drawable.default_image2)\r\n                                    .placeholder(R.drawable.load)\r\n                                    .thumbnail(0.25f)\r\n                                    .into(thumbnail);                           }\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n\r\n//                     play/pause video\r\n\r\n        final Handler[] mHandler = new Handler[1];\r\n        final Runnable[] updateProgressAction = new Runnable[1];\r\n        mUsername.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent i = new Intent(ViewPostActivity.this, profile.class);\r\n                i.putExtra(getString(R.string.calling_activity), getString(R.string.home));\r\n\r\n                i.putExtra(getString(R.string.intent_user), mphoto.getUi());\r\n                startActivity(i);\r\n            }\r\n        });\r\n        mProfileImage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent i = new Intent(ViewPostActivity.this, profile.class);\r\n                i.putExtra(getString(R.string.calling_activity), getString(R.string.home));\r\n\r\n                i.putExtra(getString(R.string.intent_user), mphoto.getUi());\r\n                startActivity(i);\r\n            }\r\n        });\r\n\r\n        playerView.getVideoSurfaceView().setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressBar.setVisibility(View.VISIBLE);\r\n//                if paused\r\n                if (play) {\r\n\r\n                    play = false;\r\n                    play2.setVisibility(View.INVISIBLE);\r\n\r\n                    LoadControl loadControl = new DefaultLoadControl();\r\n                    BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();\r\n                    TrackSelector trackSelector = new DefaultTrackSelector(new AdaptiveTrackSelection.Factory(bandwidthMeter));\r\n                    if (simpleExoPlayer != null) {\r\n\r\n                        simpleExoPlayer.release();\r\n                    }\r\n\r\n                    simpleExoPlayer = ExoPlayerFactory.newSimpleInstance(ViewPostActivity.this, trackSelector, loadControl);\r\n\r\n                    DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(\r\n                            ViewPostActivity.this, Util.getUserAgent(ViewPostActivity.this, \"RecyclerView VideoPlayer\"));\r\n                    String mediaUrl = mphoto.getIp();\r\n                    HttpProxyCacheServer proxy = getProxy(ViewPostActivity.this);\r\n                    String proxyUrl = proxy.getProxyUrl(mediaUrl);\r\n\r\n\r\n                    playerView.setPlayer(simpleExoPlayer);\r\n\r\n\r\n                    playerView.setKeepScreenOn(true);\r\n                    playerView.setKeepScreenOn(true);\r\n\r\n\r\n                    MediaSource videoSource = new ExtractorMediaSource.Factory(dataSourceFactory)\r\n                            .createMediaSource(Uri.parse(proxyUrl));\r\n//                    set Volume\r\n                    if (mute.getVisibility() == View.VISIBLE) {\r\n                        simpleExoPlayer.setVolume(0f);\r\n                    } else if (unmute.getVisibility() == View.VISIBLE) {\r\n                        simpleExoPlayer.setVolume(AudioManager.STREAM_MUSIC);\r\n                    }\r\n\r\n                    simpleExoPlayer.prepare(videoSource);\r\n                    simpleExoPlayer.seekTo(currentPosition);\r\n                    simpleExoPlayer.setPlayWhenReady(true);\r\n                    simpleExoPlayer.getPlaybackState();\r\n\r\n\r\n                    simpleExoPlayer.addListener(new Player.EventListener() {\r\n                        @Override\r\n                        public void onTimelineChanged(Timeline timeline, Object manifest, int reason) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onTracksChanged(TrackGroupArray trackGroups, TrackSelectionArray trackSelections) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onLoadingChanged(boolean isLoading) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onPlayerStateChanged(boolean playWhenReady, int playbackState) {\r\n\r\n                            if (playbackState == Player.STATE_BUFFERING) {\r\n\r\n                                progressBar.setVisibility(View.VISIBLE);\r\n\r\n                            } else if (playbackState == Player.STATE_READY) {\r\n\r\n                                duration.setVisibility(View.VISIBLE);\r\n                                thumbnail.setVisibility(GONE);\r\n                                progressBar.setVisibility(View.GONE);\r\n\r\n//                                display duration\r\n                                updateProgressAction[0] = new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n                                        updateProgress();\r\n                                    }\r\n\r\n                                    private void updateProgress() {\r\n\r\n                                        long delayMs = TimeUnit.SECONDS.toMillis(1);\r\n                                        mHandler[0].postDelayed(updateProgressAction[0], delayMs);\r\n                                        duration.setText(String.valueOf((int) (simpleExoPlayer.getDuration() - simpleExoPlayer.getCurrentPosition()) / 1000));\r\n\r\n                                    }\r\n\r\n                                };\r\n                                mHandler[0] = new Handler();\r\n                                mHandler[0].post(updateProgressAction[0]);\r\n\r\n\r\n                            } else if (playbackState == Player.STATE_ENDED) {\r\n\r\n                                play2.setVisibility(View.VISIBLE);\r\n                                play = true;\r\n                                thumbnail.setVisibility(View.VISIBLE);\r\n                                simpleExoPlayer.seekTo(0);\r\n                                simpleExoPlayer.setPlayWhenReady(false);\r\n                                simpleExoPlayer.release();\r\n\r\n                            } else if (playbackState == Player.STATE_IDLE) {\r\n                                play2.setVisibility(View.VISIBLE);\r\n\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onRepeatModeChanged(int repeatMode) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onShuffleModeEnabledChanged(boolean shuffleModeEnabled) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onPlayerError(ExoPlaybackException error) {\r\n                        }\r\n\r\n                        @Override\r\n                        public void onPositionDiscontinuity(int reason) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onPlaybackParametersChanged(PlaybackParameters playbackParameters) {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onSeekProcessed() {\r\n\r\n                        }\r\n                    });\r\n                } else {\r\n//                    if playing\r\n                    play = true;\r\n                    play2.setVisibility(View.VISIBLE);\r\n                    currentPosition = simpleExoPlayer.getCurrentPosition();\r\n                    simpleExoPlayer.setPlayWhenReady(false);\r\n                    simpleExoPlayer.getPlaybackState();\r\n                    simpleExoPlayer.release();\r\n\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n//        toggle volume\r\n        mute.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                mute.setVisibility(View.GONE);\r\n                unmute.setVisibility(View.VISIBLE);\r\n                if (simpleExoPlayer != null) {\r\n                    simpleExoPlayer.setVolume(AudioManager.STREAM_MUSIC);\r\n\r\n                }\r\n\r\n\r\n            }\r\n        });\r\n        unmute.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                mute.setVisibility(View.VISIBLE);\r\n                unmute.setVisibility(View.GONE);\r\n                if (simpleExoPlayer != null) {\r\n                    simpleExoPlayer.setVolume(0f);\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        getCurrentUser();\r\n\r\n        setupFirebaseAuth();\r\n        ifCurrentUserLiked();\r\n        ifCurrentUserPromoted();\r\n        numberofPromote();\r\n        getPhototDetail();\r\n        setupWidgets();\r\n\r\n        mStarWhite.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Log.d(TAG, \"whitestar clicked\");\r\n\r\n                mStarWhite.setVisibility(View.GONE);\r\n                mStarYellow.setVisibility(View.VISIBLE);\r\n                addlike();\r\n                NumberOfLikes();\r\n\r\n\r\n            }\r\n        });\r\n        mStarYellow.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Log.d(TAG, \"yellowstar clicked\");\r\n\r\n                mStarWhite.setVisibility(View.VISIBLE);\r\n                mStarYellow.setVisibility(View.GONE);\r\n                removeLike();\r\n                NumberOfLikes();\r\n\r\n\r\n            }\r\n        });\r\n        promote.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                promotePost();\r\n            }\r\n        });\r\n\r\n\r\n        promoted.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                unPromotePost();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void ReportPost() {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        reference.child(getString(R.string.dbname_reports))\r\n                .child(getString(R.string.field_post))\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_user_id))\r\n                .setValue(mphoto.getUi());\r\n    }\r\n\r\n    private void unPromotePost() {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n        builder.setTitle(\"Remove Promotion\");\r\n        builder.setMessage(\"Are you sure, you want to remove this Promotion?\");\r\n\r\n//                set buttons\r\n        builder.setPositiveButton(\"Remove\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                Log.d(VolleyLog.TAG, \"Rejecting: rejected \");\r\n\r\n                promote.setVisibility(View.VISIBLE);\r\n                promoted.setVisibility(View.GONE);\r\n\r\n                DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n                db.child(getString(R.string.dbname_promote))\r\n                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                        .child(mphoto.getPi())\r\n                        .removeValue();\r\n\r\n                DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n                reference.child(getString(R.string.dbname_user_photos))\r\n                        .child(mphoto.getUi())\r\n                        .child(mphoto.getPi())\r\n                        .child(getString(R.string.field_promotes))\r\n                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                        .removeValue();\r\n\r\n\r\n            }\r\n        });\r\n        builder.setNegativeButton(\"No\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n        builder.create().show();\r\n\r\n    }\r\n\r\n    private void numberofPromote() {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference.child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_promotes));\r\n        query.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                String num = String.valueOf(dataSnapshot.getChildrenCount());\r\n                promoteNum.setText(num);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    private void promotePost() {\r\n        BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(this, R.style.BottomSheetDialogTheme);\r\n\r\n        View bottomSheetView = this.getLayoutInflater()\r\n                .inflate(R.layout.layout_bottom_sheet_promote, bottomSheetDialog.findViewById(R.id.layout_bottom_sheet_container));\r\n        TextView username = bottomSheetView.findViewById(R.id.usernameBs);\r\n        TextView cancel = bottomSheetView.findViewById(R.id.cancel);\r\n        TextView promote1 = bottomSheetView.findViewById(R.id.promote);\r\n        ImageView post = bottomSheetView.findViewById(R.id.postBs);\r\n        Glide.with(ViewPostActivity.this)\r\n                .load(mphoto.getIp())\r\n                .placeholder(R.drawable.load)\r\n                .error(R.drawable.default_image2)\r\n                .placeholder(R.drawable.load)\r\n                .thumbnail(0.5f)\r\n                .into(post);\r\n        username.setText(currentUsername);\r\n\r\n\r\n        cancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                bottomSheetDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        promote1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                promote.setVisibility(View.GONE);\r\n                promoted.setVisibility(View.VISIBLE);\r\n\r\n\r\n                SNTPClient.getDate(TimeZone.getTimeZone(\"Asia/Colombo\"), new SNTPClient.Listener() {\r\n                    @Override\r\n                    public void onTimeReceived(String rawDate) {\r\n                        // rawDate -> 2019-11-05T17:51:01+0530\r\n\r\n\r\n                        String str_date = rawDate;\r\n                        java.text.DateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssZ\");\r\n                        Date date = null;\r\n                        try {\r\n                            date = formatter.parse(str_date);\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        Long timeStart = date.getTime();\r\n                        Long timeEnd = date.getTime() + 84600000;\r\n\r\n\r\n                        DatabaseReference db1 = FirebaseDatabase.getInstance().getReference();\r\n\r\n                        HashMap<String, Object> hashMap = new HashMap<>();\r\n                        hashMap.put(getString(R.string.field_photo_id), mphoto.getPi());\r\n                        hashMap.put(getString(R.string.field_user_id), mphoto.getUi());\r\n                        hashMap.put(getString(R.string.field_image_path), mphoto.getIp());\r\n                        hashMap.put(getString(R.string.field_story_ID), mphoto.getPi());\r\n                        hashMap.put(getString(R.string.field_promotion_time_end), String.valueOf(timeEnd));\r\n                        hashMap.put(getString(R.string.field_promotion_time_start), String.valueOf(timeStart));\r\n                        hashMap.put(getString(R.string.field_promoter_ID), FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n\r\n\r\n\r\n                        db1.child(getString(R.string.dbname_promote))\r\n                                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                .child(mphoto.getPi())\r\n                                .setValue(hashMap);\r\n\r\n                        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n                        reference.child(getString(R.string.dbname_user_photos))\r\n                                .child(mphoto.getUi())\r\n                                .child(mphoto.getPi())\r\n                                .child(getString(R.string.field_promotes))\r\n                                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                .setValue(\"true\");\r\n\r\n                        addToHisNotification(\"\" + mphoto.getUi(), mphoto.getPi(), \"Promoted your post.\");\r\n\r\n\r\n                        bottomSheetDialog.dismiss();\r\n\r\n                        Log.e(SNTPClient.TAG, rawDate);\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(Exception ex) {\r\n                        Log.e(SNTPClient.TAG, ex.getMessage());\r\n                    }\r\n                });\r\n\r\n\r\n            }\r\n        });\r\n\r\n\r\n        bottomSheetDialog.setContentView(bottomSheetView);\r\n        bottomSheetDialog.show();\r\n\r\n\r\n    }\r\n\r\n    private void DeletePost() {\r\n\r\n        progress.setVisibility(View.VISIBLE);\r\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\r\n                WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n        final int[] x = {0};\r\n        DatabaseReference reference3 = FirebaseDatabase.getInstance().getReference();\r\n        reference3.child(getString(R.string.dbname_follower))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        if (snapshot.exists()) {\r\n                            for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                                x[0]++;\r\n                                DatabaseReference reference3 = FirebaseDatabase.getInstance().getReference();\r\n                                reference3.child(getString(R.string.dbname_users))\r\n                                        .child(snapshot1.getKey())\r\n                                        .child(getString(R.string.post_updates))\r\n                                        .child(mphoto.getPi())\r\n                                        .setValue(FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n                                if (x[0] == snapshot.getChildrenCount()) {\r\n                                    deleteFurther();\r\n                                }\r\n                            }\r\n                        } else {\r\n                            deleteFurther();\r\n\r\n                        }\r\n                    }\r\n\r\n                    private void deleteFurther() {\r\n\r\n                        if( !mphoto.getTy().equals(\"photo\")){\r\n                            StorageReference photoRef = FirebaseStorage.getInstance().getReferenceFromUrl(mphoto.getT());\r\n                            photoRef.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void aVoid) {\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                        DatabaseReference reference2 = FirebaseDatabase.getInstance().getReference();\r\n                        reference2.child(getString(R.string.dbname_user_photos))\r\n                                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                .child(mphoto.getPi())\r\n                                .removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                            @Override\r\n                            public void onSuccess(Void aVoid) {\r\n                                StorageReference photoRef = FirebaseStorage.getInstance().getReferenceFromUrl(mphoto.getIp());\r\n                                photoRef.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        // File deleted successfully\r\n\r\n                                        DatabaseReference reference2 = FirebaseDatabase.getInstance().getReference();\r\n                                        reference2.child(getString(R.string.explore_update))\r\n                                                .child(mphoto.getPi())\r\n                                                .setValue(true)\r\n                                                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                    @Override\r\n                                                    public void onSuccess(Void aVoid) {\r\n                                                        SNTPClient.getDate(TimeZone.getTimeZone(\"Asia/Kolkata\"), new SNTPClient.Listener() {\r\n                                                            @Override\r\n                                                            public void onTimeReceived(String currentTimeStamp) {\r\n                                                                reference2.child(getString(R.string.explore_update)).child(getString(R.string.field_last_updated)).setValue(currentTimeStamp);\r\n                                                            }\r\n\r\n                                                            @Override\r\n                                                            public void onError(Exception ex) {\r\n\r\n                                                            }\r\n                                                        });\r\n                                                        String json = sp.getString(\"pl\", null);\r\n                                                        String json2 = sp.getString(\"myMedia\", null);\r\n\r\n                                                        Type type = new TypeToken<ArrayList<Photo>>() {\r\n                                                        }.getType();\r\n                                                        ArrayList<Photo> photoList = new ArrayList<>();\r\n                                                        ArrayList<Photo> mymediaList = new ArrayList<>();\r\n\r\n                                                        photoList = gson.fromJson(json, type);\r\n                                                        mymediaList = gson.fromJson(json2, type);\r\n                                                        ArrayList<Photo> photoList2 =new ArrayList<>();\r\n                                                        ArrayList<Photo> mymediaList2= new ArrayList<>();\r\n                                                        if( photoList != null) {\r\n                                                            photoList2 = new ArrayList<>(photoList);\r\n                                                        }\r\n                                                        if (mymediaList != null){\r\n                                                            mymediaList2 = new ArrayList<>(mymediaList);\r\n                                                        }\r\n\r\n\r\n                                                        if (photoList2.size() == 0) {                 //    if no arrayList is present\r\n\r\n\r\n                                                        } else {\r\n\r\n                                                            for (Photo a : photoList) {\r\n                                                                if (a.getPi().equals(mphoto.getPi()))\r\n                                                                    photoList2.remove(a);\r\n\r\n                                                            }\r\n                                                        }\r\n\r\n\r\n                                                        if (mymediaList2.size() == 0) {                 //    if no arrayList is present\r\n\r\n\r\n                                                        } else {\r\n\r\n                                                            for (Photo a : mymediaList) {\r\n                                                                if (a.getPi().equals(mphoto.getPi()))\r\n                                                                    mymediaList2.remove(a);\r\n\r\n                                                            }\r\n                                                        }\r\n\r\n\r\n                                                        //  delete from post list and save updated list\r\n                                                        SharedPreferences.Editor editor = sp.edit();\r\n                                                        json = gson.toJson(photoList2);\r\n                                                        json2 = gson.toJson(mymediaList2);\r\n\r\n                                                        editor.putString(\"pl\", json);\r\n                                                        editor.putString(\"myMedia\", json2);\r\n\r\n                                                        editor.apply();\r\n\r\n\r\n                                                        progress.setVisibility(GONE);\r\n                                                        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                                        finish();\r\n                                                    }\r\n                                                });\r\n\r\n\r\n                                    }\r\n\r\n                                }).\r\n\r\n                                        addOnFailureListener(new OnFailureListener() {\r\n                                            @Override\r\n                                            public void onFailure (@NonNull Exception exception){\r\n                                                // Uh-oh, an error occurred!\r\n                                                Log.d(VolleyLog.TAG, \"onFailure: did not delete file\");\r\n                                            }\r\n                                        });\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled (@NonNull DatabaseError error){\r\n\r\n                    }\r\n                });\r\n\r\n\r\n    }\r\n\r\n    @SuppressLint(\"ClickableViewAccessibility\")\r\n\r\n\r\n    private void getCurrentUser () {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference\r\n                .child(getString(R.string.dbname_users))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                    mCurrentUser = dataSnapshot.getValue(users.class);\r\n\r\n\r\n\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                Log.d(TAG, \"Query Cancelled\");\r\n            }\r\n        });\r\n    }\r\n\r\n    private void NumberOfLikes () {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference.child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_likes));\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                numberoflike = String.valueOf(dataSnapshot.getChildrenCount());\r\n                mLikes.setText(numberoflike);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void ifCurrentUserLiked () {\r\n        Log.d(TAG, \" checking current user liked or not\");\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference.child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_likes))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if (dataSnapshot.exists()) {\r\n                    Log.d(TAG, \" checking current user liked or not: Already liked\");\r\n                    mStarWhite.setVisibility(View.GONE);\r\n                    mStarYellow.setVisibility(View.VISIBLE);\r\n                    NumberOfLikes();\r\n                    likeByCurrentsUser2 = true;\r\n\r\n                } else {\r\n                    Log.d(TAG, \" checking current user liked or not: not liked\");\r\n                    mStarWhite.setVisibility(View.VISIBLE);\r\n                    mStarYellow.setVisibility(View.GONE);\r\n                    NumberOfLikes();\r\n                    likeByCurrentsUser2 = false;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void addToHisNotification (String hisUid, String pId, String notification){\r\n\r\n        SNTPClient.getDate(TimeZone.getTimeZone(\"Asia/Colombo\"), new SNTPClient.Listener() {\r\n            @Override\r\n            public void onTimeReceived(String rawDate) {\r\n                // rawDate -> 2019-11-05T17:51:01+0530\r\n\r\n\r\n                String str_date = rawDate;\r\n                java.text.DateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssZ\");\r\n                Date date = null;\r\n                try {\r\n                    date = formatter.parse(str_date);\r\n                } catch (ParseException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                Log.d(TAG, \"onCreateView: timestampyesss\" + date.getTime());\r\n                String timestamp = String.valueOf(date.getTime());\r\n\r\n\r\n//        data to put in notification\r\n                HashMap<Object,String> hashMap = new HashMap<>();\r\n                hashMap.put(\"pId\",pId);\r\n\r\n                hashMap.put(getString(R.string.field_timestamp),timestamp);\r\n\r\n                hashMap.put(\"pUid\",hisUid);\r\n\r\n                hashMap.put(getString(R.string.field_notification_message),notification);\r\n                hashMap.put(getString(R.string.field_if_seen),\"false\");\r\n\r\n                hashMap.put(\"sUid\",FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n\r\n\r\n                DatabaseReference ref = FirebaseDatabase.getInstance().getReference(getString(R.string.dbname_users));\r\n                ref.child(hisUid).child(getString(R.string.field_Notifications)).child(timestamp).setValue(hashMap)\r\n                        .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                            @Override\r\n                            public void onSuccess(Void aVoid) {\r\n\r\n                            }\r\n                        }).addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n\r\n                    }\r\n                });\r\n\r\n\r\n                Log.e(SNTPClient.TAG, rawDate);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(Exception ex) {\r\n                Log.e(SNTPClient.TAG, ex.getMessage());\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void addlike () {\r\n        Log.d(TAG, \" like add\");\r\n\r\n        DatabaseReference reference1 = FirebaseDatabase.getInstance().getReference();\r\n        reference1.child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_likes))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                .child(getString(R.string.field_user_id))\r\n                .setValue(FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n        NumberOfLikes();\r\n        addToHisNotification(\"\" + mphoto.getUi(), mphoto.getPi(), \"Liked your post\");\r\n\r\n\r\n    }\r\n\r\n    private void removeLike () {\r\n        Log.d(TAG, \" like removed\");\r\n\r\n        DatabaseReference reference1 = FirebaseDatabase.getInstance().getReference();\r\n        reference1.child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_likes))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                .removeValue();\r\n        NumberOfLikes();\r\n\r\n\r\n    }\r\n\r\n    private void ifCurrentUserPromoted () {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference.child(getString(R.string.dbname_user_photos))\r\n                .child(mphoto.getUi())\r\n                .child(mphoto.getPi())\r\n                .child(getString(R.string.field_promotes))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if (dataSnapshot.exists()) {\r\n                    Log.d(TAG, \" checking current user liked or not: Already liked\");\r\n                    promote.setVisibility(View.GONE);\r\n                    promoted.setVisibility(View.VISIBLE);\r\n\r\n                } else {\r\n                    Log.d(TAG, \" checking current user liked or not: not liked\");\r\n                    promote.setVisibility(View.VISIBLE);\r\n                    promoted.setVisibility(View.GONE);\r\n\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void getPhototDetail () {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference\r\n                .child(getString(R.string.dbname_users))\r\n                .child(mphoto.getUi());\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                users user = dataSnapshot.getValue(users.class);\r\n                mUsername.setText(user.getU());\r\n                currentUsername = user.getU();\r\n                Glide.with(ViewPostActivity.this)\r\n                        .load(user.getPp())\r\n                        .placeholder(R.drawable.load)\r\n                        .error(R.drawable.default_image2)\r\n                        .placeholder(R.drawable.load)\r\n                        .into(mProfileImage);\r\n                mcredit.setText(\" \" + user.getU());\r\n\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                Log.d(TAG, \"Query Cancelled\");\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    @SuppressLint(\"ClickableViewAccessibility\")\r\n    private void setupWidgets () {\r\n        mTimestamp.setText(mphoto.getDc().substring(0, 10));\r\n\r\n        mBackArrow.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n\r\n        mComment.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n//\r\n                Intent i = new Intent(ViewPostActivity.this, CommentActivity.class);\r\n                i.putExtra(\"photoId\", mphoto.getPi());\r\n                i.putExtra(\"userId\", mphoto.getUi());\r\n                startActivity(i);\r\n\r\n            }\r\n        });\r\n        mCommentnumber.setText(String.valueOf(comments.size()));\r\n        mCaption.setText(mphoto.getCap());\r\n        mLikes.setText(mLikesString);\r\n\r\n\r\n    }\r\n\r\n\r\n    private void setupFirebaseAuth () {\r\n        Log.d(TAG, \"setup FirebaseAuth: setting up firebase auth.\");\r\n        mFirebaseDatabase = FirebaseDatabase.getInstance();\r\n        myRef = mFirebaseDatabase.getReference();\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n\r\n        mAuthListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n\r\n                if (user != null) {\r\n                    Log.d(TAG, \"onAuthStateChanged:signed in:\" + user.getUid());\r\n                } else {\r\n                    Log.d(TAG, \"onAuthStateChanged:signed_out\");\r\n                }\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onStart () {\r\n        super.onStart();\r\n\r\n        mAuth.addAuthStateListener(mAuthListener);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onStop () {\r\n        super.onStop();\r\n        if (mAuthListener != null) {\r\n            mAuth.removeAuthStateListener(mAuthListener);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause () {\r\n        super.onPause();\r\n        if (simpleExoPlayer != null) {\r\n            simpleExoPlayer.release();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy () {\r\n        super.onDestroy();\r\n        if (simpleExoPlayer != null) {\r\n            simpleExoPlayer.release();\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/orion/orion/ViewPostActivity.java	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/java/com/orion/orion/ViewPostActivity.java	(date 1605880884300)
@@ -154,7 +154,6 @@
         duration = findViewById(R.id.duration);
         thumbnail = findViewById(R.id.thumbnail);
 
-
 //          Initialize SharedPreference variables
         sp = getApplicationContext().getSharedPreferences("shared preferences", Context.MODE_PRIVATE);
         gson = new Gson();
@@ -256,11 +255,13 @@
                     .placeholder(R.drawable.load)
                     .into(mPostImage);
             playerView.setVisibility(GONE);
+            thumbnail.setVisibility(GONE);
 
         } else {
             unmute.setVisibility(View.VISIBLE);
             play2.setVisibility(View.VISIBLE);
             mPostImage.setVisibility(View.GONE);
+            thumbnail.setVisibility(View.VISIBLE);
             playerView.setVisibility(View.VISIBLE);
         }
 
Index: app/src/main/res/layout/activity_post_video.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white\">\r\n\r\n    <com.google.android.material.appbar.AppBarLayout\r\n        android:id=\"@+id/profileToolbar\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_alignParentTop=\"true\"\r\n        android:background=\"@drawable/white_border\">\r\n\r\n        <androidx.appcompat.widget.Toolbar\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/backarrow\"\r\n                    android:layout_width=\"35dp\"\r\n                    android:layout_height=\"35dp\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginEnd=\"20dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:src=\"@drawable/ic_back_black_arrow\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"5dp\"\r\n                    android:text=\"Post Video\"\r\n                    android:textColor=\"#000000\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/post\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentEnd=\"true\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginRight=\"15dp\"\r\n                    android:text=\"Post\"\r\n                    android:textColor=\"@color/scheme8\"\r\n                    android:textSize=\"18sp\" />\r\n\r\n\r\n            </RelativeLayout>\r\n        </androidx.appcompat.widget.Toolbar>\r\n    </com.google.android.material.appbar.AppBarLayout>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@+id/profileToolbar\"\r\n        android:layout_marginLeft=\"15dp\"\r\n        android:layout_marginRight=\"15dp\"\r\n        android:layout_marginBottom=\"15dp\"\r\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/inputCaption\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:layout_below=\"@id/progress\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginBottom=\"10dp\"\r\n            android:background=\"@drawable/rectangular_border\"\r\n            android:backgroundTint=\"@color/white\"\r\n            android:hint=\"Enter Title or Caption\"\r\n            android:imeOptions=\"actionNext\"\r\n            android:inputType=\"textFilter\"\r\n            android:textColor=\"@color/black\"\r\n            android:textColorHint=\"@color/grey\"\r\n            android:textSize=\"15sp\" />\r\n\r\n        <View\r\n            android:id=\"@+id/captionLine\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_below=\"@+id/inputCaption\"\r\n            android:background=\"#E5E6EB\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/relThumbnail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@+id/captionLine\"\r\n            android:orientation=\"horizontal\"\r\n            android:weightSum=\"3\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/thumbtext\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:layout_margin=\"20dp\"\r\n                android:layout_weight=\"1.5\"\r\n\r\n                android:text=\"Pick a Thumbnail:\"\r\n                android:textColor=\"#03A9F4\"\r\n                android:textSize=\"15sp\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/thumbnailButton\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"20sp\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_weight=\"0.5\"\r\n                android:background=\"@color/scheme8\"\r\n                android:src=\"@drawable/ic_add\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/thumbnailImage\"\r\n                android:layout_width=\"20dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginLeft=\"10dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_weight=\"1\"\r\n                android:src=\"@drawable/ic_star_black\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:id=\"@+id/videoBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:gravity=\"center_horizontal\"\r\n            android:visibility=\"invisible\"\r\n            app:cardBackgroundColor=\"@color/white\"\r\n            app:cardCornerRadius=\"10dp\">\r\n\r\n            <androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n                <com.google.android.exoplayer2.ui.PlayerView\r\n                    android:id=\"@+id/player_view\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"0dp\"\r\n                    android:layout_gravity=\"center_horizontal|center_vertical\"\r\n                    android:background=\"@drawable/square\"\r\n                    android:backgroundTint=\"@color/black\"\r\n                    android:visibility=\"visible\"\r\n                    app:controller_layout_id=\"@layout/custom_controller\"\r\n                    app:fastforward_increment=\"10000\"\r\n                    app:hide_on_touch=\"true\"\r\n                    app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                    app:layout_constraintDimensionRatio=\"W,1:1\"\r\n                    app:layout_constraintLeft_toLeftOf=\"parent\"\r\n                    app:layout_constraintRight_toRightOf=\"parent\"\r\n                    app:layout_constraintTop_toTopOf=\"parent\"\r\n                    app:player_layout_id=\"@layout/exo_simple_player_view\"\r\n                    app:resize_mode=\"fit\"\r\n                    app:rewind_increment=\"10000\"\r\n                    app:show_timeout=\"5000\"\r\n                    app:surface_type=\"texture_view\"\r\n                    app:use_controller=\"false\" />\r\n            </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n            <com.orion.orion.util.SquareImageView\r\n                android:id=\"@+id/thumbnail\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:visibility=\"visible\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/play\"\r\n                android:layout_width=\"60dp\"\r\n                android:layout_height=\"60dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/ic_play_btn\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/close\"\r\n                android:layout_width=\"24dp\"\r\n                android:layout_height=\"24dp\"\r\n                android:layout_gravity=\"left|top\"\r\n                android:layout_margin=\"5dp\"\r\n                android:src=\"@drawable/ic_baseline_close_24\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/unmute\"\r\n                android:layout_width=\"25dp\"\r\n                android:layout_height=\"25dp\"\r\n                android:layout_gravity=\"bottom\"\r\n                android:layout_margin=\"5dp\"\r\n                android:src=\"@drawable/unmute\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/mute\"\r\n                android:layout_width=\"25dp\"\r\n                android:layout_height=\"25dp\"\r\n                android:layout_gravity=\"bottom\"\r\n                android:layout_margin=\"5dp\"\r\n                android:src=\"@drawable/mute\"\r\n                android:visibility=\"gone\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/duration\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"25dp\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_margin=\"5dp\"\r\n                android:text=\"0s\"\r\n                android:textColor=\"#686868\" />\r\n\r\n        </androidx.cardview.widget.CardView>\r\n\r\n        <TextView\r\n            android:id=\"@+id/progress\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/videoBox\"\r\n            android:layout_marginTop=\"7dp\"\r\n            android:gravity=\"center_horizontal\"\r\n            android:padding=\"10dp\"\r\n            android:textColor=\"@color/grey\"\r\n            android:textSize=\"15sp\"\r\n            android:visibility=\"visible\"\r\n            tools:text=\"Progress\" />\r\n\r\n        <ProgressBar\r\n            android:id=\"@+id/progressBar\"\r\n            style=\"?android:attr/progressBarStyleHorizontal\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/progress\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:max=\"100\"\r\n            android:progress=\"0\"\r\n            android:visibility=\"invisible\" />\r\n\r\n        <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton\r\n            android:id=\"@+id/fab\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:layout_alignParentBottom=\"true\"\r\n            android:text=\"Pick Video\"\r\n            android:textAllCaps=\"false\"\r\n            android:textColor=\"@color/white\"\r\n            app:backgroundTint=\"@color/scheme8\"\r\n            app:icon=\"@drawable/ic_baseline_video_library_24\"\r\n            app:iconTint=\"@color/white\" />\r\n\r\n    </RelativeLayout>\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_post_video.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout/activity_post_video.xml	(date 1605874747829)
@@ -74,7 +74,7 @@
             android:layout_marginBottom="10dp"
             android:background="@drawable/rectangular_border"
             android:backgroundTint="@color/white"
-            android:hint="Enter Title or Caption"
+            android:hint="Enter Caption"
             android:imeOptions="actionNext"
             android:inputType="textFilter"
             android:textColor="@color/black"
@@ -93,7 +93,10 @@
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_below="@+id/captionLine"
+            android:layout_margin="10dp"
             android:orientation="horizontal"
+            android:layout_centerHorizontal="true"
+            android:gravity="center"
             android:weightSum="3">
 
             <TextView
@@ -101,32 +104,34 @@
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_centerVertical="true"
-                android:layout_margin="20dp"
                 android:layout_weight="1.5"
 
-                android:text="Pick a Thumbnail:"
-                android:textColor="#03A9F4"
-                android:textSize="15sp" />
+                android:text="Pick Thumbnail:"
+                android:textColor="#000000"
+                android:textSize="18sp" />
 
             <ImageView
                 android:id="@+id/thumbnailButton"
-                android:layout_width="0dp"
-                android:layout_height="20sp"
+                android:layout_width="20dp"
+                android:layout_gravity="center|center_vertical"
+                android:layout_height="30sp"
                 android:layout_centerVertical="true"
-                android:layout_marginTop="20dp"
                 android:layout_weight="0.5"
                 android:background="@color/scheme8"
                 android:src="@drawable/ic_add" />
 
-            <ImageView
-                android:id="@+id/thumbnailImage"
-                android:layout_width="20dp"
-                android:layout_height="40dp"
-                android:layout_marginLeft="10dp"
-                android:layout_marginTop="20dp"
-                android:layout_weight="1"
-                android:src="@drawable/ic_star_black" />
-        </LinearLayout>
+
+        </LinearLayout>
+        <ImageView
+            android:id="@+id/thumbnailImage"
+            android:layout_width="40dp"
+            android:layout_below="@+id/relThumbnail"
+            android:layout_height="40dp"
+            android:layout_centerHorizontal="true"
+            android:layout_marginLeft="10dp"
+            android:layout_marginTop="10dp"
+            android:layout_weight="1"
+            />
 
         <androidx.cardview.widget.CardView
             android:id="@+id/videoBox"
Index: app/src/main/java/com/orion/orion/Adapters/AdapterParticipantList.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.orion.orion.Adapters;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.ActivityNotFoundException;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.net.Uri;\r\nimport android.text.format.DateFormat;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.FragmentActivity;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.bottomsheet.BottomSheetDialog;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.reflect.TypeToken;\r\nimport com.orion.orion.R;\r\nimport com.orion.orion.contest.Contest_Evaluation.activity_view_media;\r\nimport com.orion.orion.models.JoinForm;\r\nimport com.orion.orion.models.ParticipantList;\r\nimport com.orion.orion.models.users;\r\nimport com.orion.orion.profile.profile;\r\nimport com.orion.orion.util.SNTPClient;\r\n\r\nimport java.lang.reflect.Type;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\nimport static com.android.volley.VolleyLog.TAG;\r\n\r\npublic class AdapterParticipantList extends RecyclerView.Adapter<AdapterParticipantList.ViewHolder> {\r\n    private String mAppend = \"\";\r\n    //    SP\r\n    Gson gson;\r\n    SharedPreferences sp;\r\n    private Context mContext;\r\n    private List<ParticipantList> participantLists;\r\n    String name1 = \"\", profilelink = \"\", username1 = \"\", idLink = \"\", mediaLink = \"\", comment = \"\", college1 = \"\";\r\n\r\n    public AdapterParticipantList(Context mContext, List<ParticipantList> participantLists) {\r\n        this.mContext = mContext;\r\n        this.participantLists = participantLists;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n\r\n        View view = LayoutInflater.from(mContext).inflate(R.layout.contest_participant_item, parent, false);\r\n        return new AdapterParticipantList.ViewHolder(view);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final ViewHolder holder, final int i) {\r\n\r\n        ParticipantList mparticipantLists = participantLists.get(i);\r\n//          Initialize SharedPreference variables\r\n        sp = mContext.getSharedPreferences(\"shared preferences\", Context.MODE_PRIVATE);\r\n        gson = new Gson();\r\n\r\n        String timeStamp = mparticipantLists.getTim();\r\n\r\n//        convert time stamp to date and time\r\n        Calendar cal = Calendar.getInstance(Locale.ENGLISH);\r\n        cal.setTimeInMillis(Long.parseLong(timeStamp));\r\n        String dateTime = DateFormat.format(\"dd/MM/yyyy hh:mm aa\", cal).toString();\r\n\r\n        holder.time.setText(dateTime);\r\n\r\n\r\n        getparticipantDetails(mparticipantLists.getUi(), holder.username, holder.profile);\r\n\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                BottomSheetDialog bottomSheetDialog = new BottomSheetDialog(mContext, R.style.BottomSheetDialogTheme);\r\n\r\n                View bottomSheetView = ((FragmentActivity) mContext).getLayoutInflater()\r\n                        .inflate(R.layout.layout_bottom_sheet, (LinearLayout) bottomSheetDialog.findViewById(R.id.layout_bottom_sheet_container));\r\n                TextView name = bottomSheetView.findViewById(R.id.displaynameBs);\r\n                TextView remove = bottomSheetView.findViewById(R.id.remove);\r\n\r\n                TextView username = bottomSheetView.findViewById(R.id.usernameBs);\r\n                TextView college = bottomSheetView.findViewById(R.id.collegeBs);\r\n                TextView idcard = bottomSheetView.findViewById(R.id.idBs);\r\n                TextView submission = bottomSheetView.findViewById(R.id.submissionBs);\r\n                LinearLayout layout = bottomSheetView.findViewById(R.id.collegeLinear);\r\n                CircleImageView profileview = bottomSheetView.findViewById(R.id.profileBs);\r\n\r\n                name.setText(name1);\r\n                username.setText(username1);\r\n                Glide.with(mContext)\r\n                        .load(profilelink)\r\n                        .placeholder(R.drawable.load)\r\n                        .error(R.drawable.default_image2)\r\n                        .placeholder(R.drawable.load)\r\n                        .thumbnail(0.5f)\r\n                        .into(profileview);\r\n\r\n                getparticipantform(mparticipantLists.getUi(), mparticipantLists.getJi(), mparticipantLists.getCi(), college, layout);\r\n\r\n                remove.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        AlertDialog.Builder builder = new AlertDialog.Builder(mContext);\r\n                        builder.setTitle(\"Remove Participant\");\r\n                        builder.setMessage(R.string.remove_participant_prompt);\r\n\r\n//                set buttons\r\n                        builder.setPositiveButton(\"Remove\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                                DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\r\n                                db.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(mparticipantLists.getUi())\r\n                                        .child(mContext.getString(R.string.joined_contest))\r\n                                        .child(mparticipantLists.getJi())\r\n                                        .child(mContext.getString(R.string.field_status))\r\n                                        .setValue(\"Rejected\");\r\n\r\n                                db.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(mparticipantLists.getUi())\r\n                                        .child(mContext.getString(R.string.field_joined_updates))\r\n                                        .child(mparticipantLists.getJi())\r\n                                        .setValue(\"Rejected\");\r\n\r\n                                db.child(mContext.getString(R.string.dbname_participantList))\r\n                                        .child(mparticipantLists.getCi())\r\n                                        .child(mparticipantLists.getJi())\r\n                                        .removeValue();\r\n\r\n                                db.child(mContext.getString(R.string.dbname_contestlist))\r\n                                        .child(mparticipantLists.getCi())\r\n                                        .child(mContext.getString(R.string.field_Participant_List))\r\n                                        .child(mparticipantLists.getUi())\r\n                                        .removeValue()\r\n                                        .addOnSuccessListener(aVoid -> {\r\n                                            if (mparticipantLists.getMl().length()<23)\r\n                                            {\r\n                                                deleteUrl();\r\n                                            }\r\n                                           else if (mparticipantLists.getMl() == null || mparticipantLists.getMl().equals(\"\")\r\n                                                    || !mparticipantLists.getMl().substring(8, 23).equals(\"firebasestorage\")) {\r\n\r\n                                               deleteUrl();\r\n\r\n\r\n                                            } else {\r\n\r\n                                               deleteImage();\r\n\r\n                                            }\r\n\r\n                                        });\r\n\r\n\r\n                            }\r\n\r\n                            private void deleteImage() {\r\n                                DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\r\n                                StorageReference photoRef = FirebaseStorage.getInstance().getReferenceFromUrl(mparticipantLists.getMl());\r\n                                photoRef.delete().addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n\r\n                                        DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference();\r\n                                        ref2.child(mContext.getString(R.string.dbname_participantList))\r\n                                                .child(mparticipantLists.getCi())\r\n                                                .child(mparticipantLists.getJi())\r\n                                                .removeValue().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                            @Override\r\n                                            public void onSuccess(Void aVoid) {\r\n                                                //    Add newly Created ArrayList to Shared Preferences\r\n                                                String json = sp.getString(mparticipantLists.getCi(), null);\r\n\r\n                                                Type type = new TypeToken<ArrayList<ParticipantList>>() {\r\n                                                }.getType();\r\n                                                ArrayList<ParticipantList> participantList=new ArrayList<>();\r\n\r\n                                                participantList = gson.fromJson(json, type);\r\n\r\n                                                if (participantList==null){\r\n\r\n                                                }else{\r\n                                                    ArrayList<ParticipantList> participantList2=new ArrayList<>(participantList);\r\n\r\n\r\n                                                    for (ParticipantList a:participantList){\r\n                                                        if (a.getJi().equals(mparticipantLists.getJi())){\r\n                                                            participantList2.remove(a);\r\n                                                        }\r\n                                                    }\r\n\r\n                                                    participantList.remove(mparticipantLists);\r\n\r\n                                                    SharedPreferences.Editor editor = sp.edit();\r\n                                                    json = gson.toJson(participantList2);\r\n                                                    editor.putString(mparticipantLists.getCi(), json);\r\n                                                    editor.apply();\r\n\r\n                                                }\r\n\r\n\r\n                                                participantLists.remove(participantLists.get(i));\r\n\r\n                                                AdapterParticipantList.this.notifyItemRemoved(i);\r\n\r\n\r\n                                                db.child(mContext.getString(R.string.dbname_users))\r\n                                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                                        .child(mContext.getString(R.string.changedJoinedContest))\r\n                                                        .setValue(\"true\");\r\n\r\n\r\n                                                bottomSheetDialog.dismiss();\r\n                                            }\r\n                                        });\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            private void deleteUrl() {\r\n                                DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\r\n                                //    Add newly Created ArrayList to Shared Preferences\r\n                                String json = sp.getString(mparticipantLists.getCi(), null);\r\n\r\n                                Type type = new TypeToken<ArrayList<ParticipantList>>() {\r\n                                }.getType();\r\n                                ArrayList<ParticipantList> participantList=new ArrayList<>();\r\n\r\n                                participantList = gson.fromJson(json, type);\r\n\r\n                                if (participantList==null){\r\n\r\n                                }else{\r\n                                    ArrayList<ParticipantList> participantList2=new ArrayList<>(participantList);\r\n\r\n\r\n                                    for (ParticipantList a:participantList){\r\n\r\n                                        if (a.getJi().equals(participantList.get(i).getJi())){\r\n                                            participantList2.remove(a);\r\n                                        }\r\n                                    }\r\n\r\n                                    participantList.remove(participantLists.get(i));\r\n\r\n                                    SharedPreferences.Editor editor = sp.edit();\r\n                                    json = gson.toJson(participantList2);\r\n                                    editor.putString(mparticipantLists.getCi(), json);\r\n                                    editor.apply();\r\n\r\n                                }\r\n\r\n\r\n                                participantLists.remove(participantLists.get(i));\r\n\r\n                                AdapterParticipantList.this.notifyItemRemoved(i);\r\n\r\n                                db.child(mContext.getString(R.string.dbname_users))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.changedJoinedContest))\r\n                                        .setValue(\"true\");\r\n                                bottomSheetDialog.dismiss();\r\n                            }\r\n\r\n\r\n                        });\r\n                        builder.setNegativeButton(\"No\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                dialog.dismiss();\r\n                            }\r\n                        });\r\n                        builder.create().show();\r\n\r\n\r\n                    }\r\n                });\r\n\r\n\r\n                name.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                        Intent i = new Intent(mContext, profile.class);\r\n                        i.putExtra(mContext.getString(R.string.calling_activity), mContext.getString(R.string.home));\r\n\r\n                        i.putExtra(mContext.getString(R.string.intent_user),mparticipantLists.getUi());\r\n                        mContext.startActivity(i);\r\n                    }\r\n                });\r\n                username.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                        Intent i = new Intent(mContext, profile.class);\r\n                        i.putExtra(mContext.getString(R.string.calling_activity), mContext.getString(R.string.home));\r\n\r\n                        i.putExtra(mContext.getString(R.string.intent_user), mparticipantLists.getUi());\r\n                        mContext.startActivity(i);\r\n                    }\r\n                });\r\n                profileview.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                        Intent i = new Intent(mContext, profile.class);\r\n                        i.putExtra(mContext.getString(R.string.calling_activity), mContext.getString(R.string.home));\r\n\r\n                        i.putExtra(mContext.getString(R.string.intent_user), mparticipantLists.getUi());\r\n                        mContext.startActivity(i);\r\n                    }\r\n                });\r\n                submission.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        boolean ok=mparticipantLists.getMl().length()>23;\r\n                        boolean ifNull=mparticipantLists.getMl() == null ||mparticipantLists.getMl().equals(\"\");\r\n                        if (ifNull){\r\n                            Toast.makeText(mContext, \"Invalid Link\", Toast.LENGTH_SHORT).show();\r\n\r\n                        }else if (ok) {\r\n                            if (mparticipantLists.getMl().substring(8, 23).equals(\"firebasestorage\")) {\r\n                                Intent i = new Intent(mContext.getApplicationContext(), activity_view_media.class);\r\n                                i.putExtra(\"imageLink\", mparticipantLists.getMl());\r\n                                i.putExtra(\"view\", \"No\");\r\n\r\n                                mContext.startActivity(i);\r\n                            } else {\r\n                                try{\r\n                                    Uri uri = Uri.parse(mparticipantLists.getMl());\r\n                                    Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n                                    mContext.startActivity(intent);\r\n\r\n                                }catch (ActivityNotFoundException e){\r\n                                    Toast.makeText(mContext, \"Invalid Link\", Toast.LENGTH_SHORT).show();\r\n                                    Log.e(SNTPClient.TAG, \"onClick: \"+ e.getMessage());\r\n                                }\r\n                            }\r\n                        }else {\r\n                            try{\r\n                                Uri uri = Uri.parse(mparticipantLists.getMl());\r\n                                Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n                                mContext.startActivity(intent);\r\n\r\n                            }catch (ActivityNotFoundException e){\r\n                                Toast.makeText(mContext, \"Invalid Link\", Toast.LENGTH_SHORT).show();\r\n                                Log.e(SNTPClient.TAG, \"onClick: \"+ e.getMessage());\r\n                            }\r\n                        }\r\n\r\n\r\n\r\n                    }\r\n                });\r\n                idcard.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        Intent i = new Intent(mContext.getApplicationContext(), activity_view_media.class);\r\n                        i.putExtra(\"imageLink\", mparticipantLists.getIl());\r\n                        i.putExtra(\"view\", \"No\");\r\n\r\n                        mContext.startActivity(i);\r\n\r\n                    }\r\n                });\r\n\r\n                bottomSheetDialog.setContentView(bottomSheetView);\r\n                bottomSheetDialog.show();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void getparticipantform(String userid, String joiningkey, String contestkey, TextView college, LinearLayout layout) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n        ref.child(mContext.getString(R.string.dbname_contests))\r\n                .child(userid)\r\n                .child(mContext.getString(R.string.joined_contest))\r\n                .child(joiningkey)\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        JoinForm joinForm = dataSnapshot.getValue(JoinForm.class);\r\n                        college1 = joinForm.getClg();\r\n                        String hostid = joinForm.getHst();\r\n                        DatabaseReference ref1 = FirebaseDatabase.getInstance().getReference();\r\n                        ref1.child(mContext.getString(R.string.dbname_contests))\r\n                                .child(hostid)\r\n                                .child(mContext.getString(R.string.created_contest))\r\n                                .child(contestkey)\r\n                                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                    @Override\r\n                                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                        String openfor = dataSnapshot.child(mContext.getString(R.string.field_open_for)).getValue().toString();\r\n                                        if (openfor.equals(\"All\")) {\r\n                                            layout.setVisibility(View.GONE);\r\n                                        } else {\r\n                                            layout.setVisibility(View.VISIBLE);\r\n                                            college.setText(college1);\r\n                                        }\r\n                                    }\r\n\r\n                                    @Override\r\n                                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                                    }\r\n                                });\r\n\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    public long getItemId(int position) {\r\n        ParticipantList form = participantLists.get(position);\r\n        return form.getJi().hashCode();\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return participantLists.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        private TextView username, time;\r\n        private DatabaseReference mReference;\r\n\r\n        private CircleImageView profile;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            mReference = FirebaseDatabase.getInstance().getReference();\r\n\r\n\r\n            profile = (CircleImageView) itemView.findViewById(R.id.profilePartCv);\r\n            username = itemView.findViewById(R.id.username);\r\n            time = itemView.findViewById(R.id.timeStamp);\r\n\r\n        }\r\n    }\r\n\r\n\r\n    private void getparticipantDetails(String userid, TextView username, CircleImageView profile) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n        ref.child(mContext.getString(R.string.dbname_users))\r\n                .child(userid)\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        users user = dataSnapshot.getValue(users.class);\r\n                        name1 = user.getDn();\r\n                        username1 = user.getU();\r\n                        profilelink = user.getPp();\r\n                        try {\r\n\r\n                            Glide.with(mContext)\r\n                                    .load(profilelink)\r\n                                    .placeholder(R.drawable.load)\r\n                                    .error(R.drawable.default_image2)\r\n                                    .placeholder(R.drawable.load)\r\n                                    .thumbnail(0.5f)\r\n                                    .into(profile);\r\n                        } catch (NullPointerException e) {\r\n                            Log.e(TAG, \"onDataChange: \" + e.getMessage());\r\n\r\n                        }\r\n\r\n                        username.setText(user.getU());\r\n\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/orion/orion/Adapters/AdapterParticipantList.java	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/java/com/orion/orion/Adapters/AdapterParticipantList.java	(date 1605881449258)
@@ -493,7 +493,7 @@
                         profilelink = user.getPp();
                         try {
 
-                            Glide.with(mContext)
+                            Glide.with(mContext.getApplicationContext())
                                     .load(profilelink)
                                     .placeholder(R.drawable.load)
                                     .error(R.drawable.default_image2)
Index: app/src/main/res/layout/dialog_profile_link.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:layout_margin=\"8dp\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:padding=\"8dp\"\r\n        android:paddingBottom=\"20dp\"\r\n        android:text=\"Enter Your Profile Link\"\r\n        android:textColor=\"@color/scheme8\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <EditText\r\n        android:id=\"@+id/edt_comment\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:background=\"@drawable/grey_border_bottom\"\r\n        android:hint=\"Enter link here\"\r\n        android:padding=\"8dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/buttonSubmit\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:layout_marginBottom=\"8dp\"\r\n        android:backgroundTint=\"@color/scheme8\"\r\n        android:text=\"ADD\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/edt_comment\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/buttonCancel\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:layout_marginBottom=\"8dp\"\r\n        android:text=\"Cancel\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/edt_comment\" />\r\n\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/dialog_profile_link.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout/dialog_profile_link.xml	(date 1605876488274)
@@ -17,7 +17,6 @@
         android:text="Enter Your Profile Link"
         android:textColor="@color/scheme8"
         android:textSize="16sp"
-        android:textStyle="bold"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintStart_toStartOf="parent"
         app:layout_constraintTop_toTopOf="parent" />
@@ -29,7 +28,7 @@
         android:layout_marginStart="8dp"
         android:layout_marginTop="8dp"
         android:layout_marginEnd="8dp"
-        android:background="@drawable/grey_border_bottom"
+        android:background="@drawable/rectangular_border"
         android:hint="Enter link here"
         android:padding="8dp"
         app:layout_constraintEnd_toEndOf="parent"
@@ -45,6 +44,7 @@
         android:layout_marginBottom="8dp"
         android:backgroundTint="@color/scheme8"
         android:text="ADD"
+        android:textColor="@color/white"
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintTop_toBottomOf="@+id/edt_comment" />
@@ -57,6 +57,7 @@
         android:layout_marginTop="8dp"
         android:layout_marginBottom="8dp"
         android:text="Cancel"
+
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintStart_toStartOf="parent"
         app:layout_constraintTop_toBottomOf="@+id/edt_comment" />
Index: app/src/main/java/com/orion/orion/contest/Contest_Evaluation/fragment_contest_overview.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.orion.orion.contest.Contest_Evaluation;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.os.Parcelable;\r\nimport android.util.Log;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.ScrollView;\r\nimport android.widget.TableLayout;\r\nimport android.widget.TableRow;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.reflect.TypeToken;\r\nimport com.orion.orion.Adapters.AdapterRankList;\r\nimport com.orion.orion.Adapters.AdapterWinners;\r\nimport com.orion.orion.R;\r\nimport com.orion.orion.contest.ViewContestDetails;\r\nimport com.orion.orion.contest.ranking;\r\nimport com.orion.orion.models.ContestDetail;\r\nimport com.orion.orion.models.ParticipantList;\r\nimport com.orion.orion.models.juryMarks;\r\nimport com.orion.orion.models.users;\r\nimport com.orion.orion.profile.profile;\r\nimport com.orion.orion.util.FirebaseMethods;\r\nimport com.orion.orion.util.SNTPClient;\r\nimport com.orion.orion.util.StringManipilation;\r\n\r\nimport java.lang.reflect.Type;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.Comparator;\r\nimport java.util.Date;\r\nimport java.util.TimeZone;\r\n\r\nimport static com.android.volley.VolleyLog.TAG;\r\n\r\npublic class fragment_contest_overview extends Fragment {\r\n\r\n    private TableLayout juryTable, juryTable2;\r\n    private String joiningKey = \"\";\r\n    private RecyclerView rankRv;\r\n    private FirebaseMethods mFirebaseMethods;\r\n    private ArrayList<ParticipantList> participantLists;\r\n    private ArrayList<ParticipantList> participantLists2;\r\n    private RelativeLayout relWinner;\r\n\r\n    //    SP\r\n    private Gson gson;\r\n    private SharedPreferences sp;\r\n    private users user = new users();\r\n\r\n    public LinearLayout progress;\r\n    private RecyclerView winnerRv;\r\n    private Button pubBtn, pubBtn2;\r\n    private String timestamp = \"\";\r\n    boolean isPublicAndJuryVote = false;\r\n\r\n    private String Conteskey;\r\n\r\n\r\n    public fragment_contest_overview() {\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_contest_overview, container, false);\r\n\r\n        juryTable = view.findViewById(R.id.jurytable);\r\n        juryTable2 = view.findViewById(R.id.jurytable2);\r\n        pubBtn = view.findViewById(R.id.pubBtn);\r\n        pubBtn2 = view.findViewById(R.id.pubBtn2);\r\n        relWinner = view.findViewById(R.id.relWin);\r\n        ScrollView scrollView = view.findViewById(R.id.scroll);\r\n        TextView seeRank = view.findViewById(R.id.seeRank);\r\n        progress = view.findViewById(R.id.pro);\r\n\r\n        mFirebaseMethods = new FirebaseMethods(getActivity());\r\n\r\n        juryTable.setStretchAllColumns(true);\r\n        juryTable2.setStretchAllColumns(true);\r\n        Bundle b = getActivity().getIntent().getExtras();\r\n        Conteskey = b.getString(\"contestId\");\r\n\r\n        rankRv = view.findViewById(R.id.rankList);\r\n        rankRv.setHasFixedSize(true);\r\n        LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getContext());\r\n        rankRv.setLayoutManager(linearLayoutManager);\r\n\r\n        seeRank.setOnClickListener((View.OnClickListener) view1 -> {\r\n            Intent i = new Intent(getContext(), ranking.class);\r\n            Bundle args = new Bundle();\r\n            args.putParcelableArrayList(\"participant\", (ArrayList<? extends Parcelable>) participantLists);\r\n            i.putExtra(\"BUNDLE\", args);\r\n            startActivity(i);\r\n        });\r\n\r\n//          Initialize SharedPreference variables\r\n        sp = getContext().getSharedPreferences(\"shared preferences\", Context.MODE_PRIVATE);\r\n        gson = new Gson();\r\n\r\n        participantLists = new ArrayList<>();\r\n        participantLists2 = new ArrayList<>();\r\n\r\n//        **********************************************************\r\n\r\n        winnerRv = view.findViewById(R.id.recyclerWinner);\r\n        winnerRv.setHasFixedSize(true);\r\n        LinearLayoutManager linearLayoutManager1 = new LinearLayoutManager(getContext());\r\n        winnerRv.setLayoutManager(linearLayoutManager1);\r\n\r\n        SNTPClient.getDate(TimeZone.getTimeZone(\"Asia/Colombo\"), new SNTPClient.Listener() {\r\n            @Override\r\n            public void onTimeReceived(String rawDate) {\r\n                // rawDate -> 2019-11-05T17:51:01+0530\r\n                //*************************************************************************\r\n                String currentTime = StringManipilation.getTime(rawDate);\r\n                @SuppressLint(\"SimpleDateFormat\") java.text.DateFormat formatter1 = new SimpleDateFormat(\"dd-MM-yyyy\");\r\n                Date date1 = null;\r\n                try {\r\n                    date1 = (Date) formatter1.parse(currentTime);\r\n                } catch (ParseException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                assert date1 != null;\r\n                timestamp = String.valueOf(date1.getTime());\r\n\r\n                DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n                ref.child(getString(R.string.dbname_contestlist))\r\n                        .child(Conteskey)\r\n                        .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                if (dataSnapshot.exists()) {\r\n                                    ContestDetail contestDetail = dataSnapshot.getValue(ContestDetail.class);\r\n                                    assert contestDetail != null;\r\n                                    String WinDec = contestDetail.getWd();\r\n                                    boolean result = contestDetail.getR();\r\n                                    if (contestDetail.getVt().equals(\"Jury and Public\")) {\r\n                                        isPublicAndJuryVote = true;\r\n                                    }\r\n\r\n\r\n                                    @SuppressLint(\"SimpleDateFormat\") java.text.DateFormat formatter = new SimpleDateFormat(\"dd-MM-yyyy\");\r\n                                    Date date = null;\r\n                                    try {\r\n                                        date = (Date) formatter.parse(WinDec);\r\n                                    } catch (ParseException e) {\r\n                                        e.printStackTrace();\r\n                                    }\r\n                                    assert date != null;\r\n                                    String winD = String.valueOf(date.getTime());\r\n                                    Thread thread = new Thread() {\r\n                                        @Override\r\n                                        public void run() {\r\n                                            try {\r\n                                                synchronized (this) {\r\n                                                    wait(1000);\r\n\r\n                                                    getActivity().runOnUiThread(() -> {\r\n                                                        if (result) {\r\n                                                            pubBtn2.setVisibility(View.VISIBLE);\r\n                                                            relWinner.setVisibility(View.VISIBLE);\r\n                                                        } else {\r\n                                                            if ((Long.parseLong(winD) + 172800000) < Long.parseLong(timestamp)) {\r\n                                                                publishResultAutomatically();\r\n                                                            } else if (Long.parseLong(winD) <= Long.parseLong(timestamp)) {\r\n                                                                pubBtn.setVisibility(View.VISIBLE);\r\n                                                                relWinner.setVisibility(View.VISIBLE);\r\n                                                            } else {\r\n                                                                relWinner.setVisibility(View.GONE);\r\n                                                            }\r\n                                                        }\r\n                                                    });\r\n                                                }\r\n                                            } catch (InterruptedException e) {\r\n                                                e.printStackTrace();\r\n                                            }\r\n                                        }\r\n\r\n                                        ;\r\n                                    };\r\n                                    thread.start();\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n\r\n                Log.e(SNTPClient.TAG, rawDate);\r\n\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onError(Exception e) {\r\n                Log.e(SNTPClient.TAG, e.getMessage());\r\n            }\r\n        });\r\n\r\n        pubBtn.setOnClickListener(v -> {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n            builder.setTitle(\"Publish Result\");\r\n            builder.setMessage(\"Are you sure, you want to publish result?\");\r\n//                set buttons\r\n            builder.setPositiveButton(\"Publish\", (dialog, which) -> getWinners(participantLists, true));\r\n            builder.setNegativeButton(\"Not now\", (dialog, which) -> dialog.dismiss());\r\n            builder.create().show();\r\n\r\n        });\r\n        getParticipantListFromSP();\r\n        return view;\r\n    }\r\n\r\n    private void publishResultAutomatically() {\r\n        progress.setVisibility(View.VISIBLE);\r\n\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n        ref.child(getString(R.string.dbname_participantList))\r\n                .child(Conteskey)\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        int x = 0;\r\n                        ArrayList<ParticipantList> participantLists = new ArrayList<>();\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n                            x++;\r\n                            participantLists.add(snapshot.getValue(ParticipantList.class));\r\n                            if (x == dataSnapshot.getChildrenCount()) {\r\n                                getWinners(participantLists, false);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void getWinners(ArrayList<ParticipantList> participantLists, boolean manual) {\r\n        Collections.sort(participantLists, (o1, o2) -> Integer.compare(o1.getTs(), o2.getTs()));\r\n        Collections.reverse(participantLists);\r\n        try {\r\n            for (int x = 0; x < 3; x++) {\r\n                participantLists2.add(participantLists.get(x));\r\n            }\r\n        } catch (IndexOutOfBoundsException e) {\r\n        }\r\n        mFirebaseMethods.publishResut(manual, Conteskey, participantLists, progress, getActivity(), participantLists2);\r\n        pubBtn2.setVisibility(View.VISIBLE);\r\n        relWinner.setVisibility(View.VISIBLE);\r\n    }\r\n\r\n\r\n    private void juryMarksTable(String conteskey) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n        ref.child(getString(R.string.dbname_participantList))\r\n                .child(conteskey)\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n                            ParticipantList    participantList = snapshot.getValue(ParticipantList.class);\r\n                            assert participantList != null;\r\n                            joiningKey = participantList.getJi();\r\n                            DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference();\r\n                            ParticipantList finalParticipantList = participantList;\r\n                            ref2.child(getString(R.string.dbname_participantList))\r\n                                    .child(conteskey)\r\n                                    .child(joiningKey)\r\n                                    .child(getString(R.string.juryMarks))\r\n                                    .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                            juryMarks  juryMarks = dataSnapshot.getValue(juryMarks.class);\r\n                                            TableRow tbrow = new TableRow(getActivity());\r\n                                            tbrow.setLayoutParams(new TableLayout.LayoutParams(0, TableRow.LayoutParams.WRAP_CONTENT, 1f));\r\n                                            tbrow.setWeightSum(5);\r\n                                            TextView t1v = new TextView(getActivity());\r\n                                            getU(finalParticipantList.getUi(), t1v);\r\n                                            t1v.setOnClickListener(v -> {\r\n                                                DatabaseReference ref =FirebaseDatabase.getInstance().getReference();\r\n\r\n                                                Query userquery = ref\r\n                                                        .child(getString(R.string.dbname_username))\r\n                                                        .child(t1v.getText().toString());\r\n                                                userquery.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                                    @Override\r\n                                                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                                                        if (dataSnapshot.exists()) {\r\n                                                           String username = dataSnapshot.getValue().toString();\r\n\r\n                                                            Intent i = new Intent(getContext(), profile.class);\r\n                                                            i.putExtra(getString(R.string.calling_activity), getString(R.string.home));\r\n\r\n                                                            i.putExtra(getString(R.string.intent_user), username);\r\n                                                            startActivity(i);\r\n\r\n\r\n                                                        }\r\n\r\n                                                    }\r\n\r\n\r\n                                                    @Override\r\n                                                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                                                        Log.d(TAG, \"Query Cancelled\");\r\n                                                    }\r\n                                                });\r\n                                            });\r\n                                            t1v.setTextColor(Color.RED);\r\n                                            t1v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t1v);\r\n                                            TextView t2v = new TextView(getActivity());\r\n                                            assert juryMarks != null;\r\n                                            t2v.setText(juryMarks.getJ1());\r\n                                            t2v.setTextColor(Color.BLACK);\r\n                                            t2v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t2v);\r\n                                            TextView t3v = new TextView(getActivity());\r\n                                            t3v.setText(juryMarks.getJ2());\r\n                                            t3v.setTextColor(Color.BLACK);\r\n                                            t3v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t3v);\r\n                                            TextView t4v = new TextView(getActivity());\r\n                                            t4v.setText(juryMarks.getJ3());\r\n                                            t4v.setTextColor(Color.BLACK);\r\n                                            t4v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t4v);\r\n                                            TextView t5v = new TextView(getActivity());\r\n                                            long x = 0, y = 0, z = 0;\r\n                                            if (juryMarks.getJ1().equals(\"\")) x = 0;\r\n                                            else x = Long.parseLong(juryMarks.getJ1());\r\n                                            if (juryMarks.getJ2().equals(\"\")) y = 0;\r\n                                            else y = Long.parseLong(juryMarks.getJ2());\r\n                                            if (juryMarks.getJ3().equals(\"\")) z = 0;\r\n                                            else z = Long.parseLong(juryMarks.getJ3());\r\n                                            long total = x + y + z;\r\n                                            t5v.setText(String.valueOf(total));\r\n                                            t5v.setTextColor(Color.BLACK);\r\n                                            t5v.setMaxLines(1);\r\n                                            t5v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t5v);\r\n                                            juryTable.addView(tbrow);\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                                        }\r\n                                    });\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void juryAndPublicMarksTable(String contestkey) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n        ref.child(getString(R.string.dbname_participantList))\r\n                .child(contestkey)\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n                            ParticipantList participantList = new ParticipantList();\r\n                            participantList = snapshot.getValue(ParticipantList.class);\r\n                            assert participantList != null;\r\n                            joiningKey = participantList.getJi().toString();\r\n                            DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference();\r\n                            ParticipantList finalParticipantList = participantList;\r\n                            ref2.child(getString(R.string.dbname_participantList))\r\n                                    .child(contestkey)\r\n                                    .child(joiningKey)\r\n                                    .child(getString(R.string.juryMarks))\r\n                                    .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                            juryMarks juryMarks = new juryMarks();\r\n                                            juryMarks = dataSnapshot.getValue(juryMarks.class);\r\n                                            TableRow tbrow = new TableRow(getActivity());\r\n                                            tbrow.setLayoutParams(new TableLayout.LayoutParams(0, TableRow.LayoutParams.WRAP_CONTENT, 1f));\r\n                                            tbrow.setWeightSum(5);\r\n                                            TextView t1v = new TextView(getActivity());\r\n                                            getU(finalParticipantList.getUi(), t1v);\r\n                                            t1v.setOnClickListener(v -> {\r\n                                                DatabaseReference ref =FirebaseDatabase.getInstance().getReference();\r\n\r\n                                                Query userquery = ref\r\n                                                        .child(getString(R.string.dbname_username))\r\n                                                        .child(t1v.getText().toString());\r\n                                                userquery.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                                    @Override\r\n                                                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                                                        if (dataSnapshot.exists()) {\r\n                                                            String username = dataSnapshot.getValue().toString();\r\n\r\n                                                            Intent i = new Intent(getContext(), profile.class);\r\n                                                            i.putExtra(getString(R.string.calling_activity), getString(R.string.home));\r\n\r\n                                                            i.putExtra(getString(R.string.intent_user), username);\r\n                                                            startActivity(i);\r\n\r\n\r\n                                                        }\r\n\r\n                                                    }\r\n\r\n\r\n                                                    @Override\r\n                                                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                                                        Log.d(TAG, \"Query Cancelled\");\r\n                                                    }\r\n                                                });\r\n                                            });\r\n                                            t1v.setTextColor(Color.RED);\r\n                                            t1v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t1v);\r\n                                            TextView t2v = new TextView(getActivity());\r\n                                            long t = 0, o = 0, p = 0;\r\n                                            if (juryMarks.getJ1().equals(\"\")) t = 0;\r\n                                            else t = Long.parseLong(juryMarks.getJ1());\r\n                                            if (juryMarks.getJ2().equals(\"\")) o = 0;\r\n                                            else o = Long.parseLong(juryMarks.getJ2());\r\n                                            if (juryMarks.getJ3().equals(\"\")) p = 0;\r\n                                            else p = Long.parseLong(juryMarks.getJ3());\r\n                                            long total = t + o + p;\r\n                                            t2v.setText(String.valueOf(total));\r\n                                            t2v.setTextColor(Color.BLACK);\r\n                                            t2v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t2v);\r\n                                            TextView t3v = new TextView(getActivity());\r\n                                            t3v.setTextColor(Color.BLACK);\r\n                                            t3v.setGravity(Gravity.CENTER);\r\n                                            tbrow.addView(t3v);\r\n                                            TextView t4v = new TextView(getActivity());\r\n                                            t4v.setTextColor(Color.BLACK);\r\n                                            t4v.setGravity(Gravity.CENTER);\r\n                                            getVoteCount(finalParticipantList.getJi(), t3v, contestkey, t4v, t2v);\r\n                                            tbrow.addView(t4v);\r\n                                            juryTable2.addView(tbrow);\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                                        }\r\n                                    });\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void getTotal(TextView t2v, TextView t3v, TextView t4v, String contestkey, String Joiningkey) {\r\n        try {\r\n            long a = Long.parseLong(t2v.getText().toString());\r\n            long b = Long.parseLong(t3v.getText().toString());\r\n            long c;\r\n            if (isPublicAndJuryVote) c = (a + b) / 2;\r\n            else c = (a + b);\r\n            t4v.setText(String.valueOf(c));\r\n            DatabaseReference ref4 = FirebaseDatabase.getInstance().getReference();\r\n            ref4.child(getString(R.string.dbname_participantList))\r\n                    .child(contestkey)\r\n                    .child(Joiningkey)\r\n                    .child(getString(R.string.field_total_score))\r\n                    .setValue((int) c);\r\n        } catch (NumberFormatException ignored) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void getVoteCount(String joiningKey, TextView t3v, String contestkey, TextView t4v, TextView t2v) {\r\n        DatabaseReference ref4 = FirebaseDatabase.getInstance().getReference();\r\n        ref4.child(getString(R.string.dbname_participantList))\r\n                .child(contestkey)\r\n                .child(joiningKey)\r\n                .child(getString(R.string.voting_list))\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        long i = dataSnapshot.getChildrenCount();\r\n                        t3v.setText(String.valueOf(i));\r\n                        getTotal(t2v, t3v, t4v, contestkey, joiningKey);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void getU(String userid, TextView textView) {\r\n        DatabaseReference ref5 = FirebaseDatabase.getInstance().getReference();\r\n        ref5.child(getString(R.string.dbname_users)).\r\n                child(userid).\r\n                child(getString(R.string.field_username)).\r\n                addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                            String user = dataSnapshot.getValue().toString();\r\n                            textView.setText(user);\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n\r\n\r\n    }\r\n\r\n    private void getRank() {\r\n        participantLists2.clear();\r\n        Collections.sort(participantLists, (o1, o2) -> Integer.compare(o1.getTs(), o2.getTs()));\r\n        Collections.reverse(participantLists);\r\n        try {\r\n            for (int x = 0; x < 3; x++) participantLists2.add(participantLists.get(x));\r\n        } catch (IndexOutOfBoundsException e) {\r\n            Log.e(TAG, \"onDataChange: \" + e.getMessage());\r\n        }\r\n\r\n        displayParticipantRank();\r\n\r\n        AdapterWinners winnerList = new AdapterWinners(getContext(), participantLists2);\r\n        winnerList.setHasStableIds(true);\r\n\r\n        winnerRv.setAdapter(winnerList);\r\n    }\r\n\r\n    //  fetching ParticipantList  from SharedPreferences\r\n    private void getParticipantListFromSP() {\r\n        String json = sp.getString(Conteskey, null);\r\n\r\n        Type type = new TypeToken<ArrayList<ParticipantList>>() {\r\n        }.getType();\r\n        participantLists = gson.fromJson(json, type);\r\n        if (participantLists == null) {    //        if no arrayList is present\r\n            participantLists = new ArrayList<>();\r\n        }\r\n        getRank();\r\n        juryMarksTable(Conteskey);\r\n        juryAndPublicMarksTable(Conteskey);\r\n\r\n    }\r\n\r\n    private void displayParticipantRank() {\r\n        ArrayList<ParticipantList> paginatedParticipantLists = new ArrayList<>();\r\n        if (participantLists != null) {\r\n            try {\r\n                int iteration = participantLists.size();\r\n                if (iteration > 10) iteration = 10;\r\n                int mResults = 10;\r\n                for (int i = 0; i < iteration; i++)\r\n                    paginatedParticipantLists.add(participantLists.get(i));\r\n                AdapterRankList rankList = new AdapterRankList(getContext(), paginatedParticipantLists);\r\n                rankList.setHasStableIds(true);\r\n                rankRv.setAdapter(rankList);\r\n\r\n            } catch (NullPointerException e) {\r\n                Log.e(TAG, \"Null pointer exception\" + e.getMessage());\r\n\r\n            } catch (IndexOutOfBoundsException e) {\r\n                Log.e(TAG, \"index out of bound\" + e.getMessage());\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/orion/orion/contest/Contest_Evaluation/fragment_contest_overview.java	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/java/com/orion/orion/contest/Contest_Evaluation/fragment_contest_overview.java	(date 1605875861639)
@@ -185,31 +185,36 @@
                                                 synchronized (this) {
                                                     wait(1000);
 
-                                                    getActivity().runOnUiThread(() -> {
-                                                        if (result) {
-                                                            pubBtn2.setVisibility(View.VISIBLE);
-                                                            relWinner.setVisibility(View.VISIBLE);
-                                                        } else {
-                                                            if ((Long.parseLong(winD) + 172800000) < Long.parseLong(timestamp)) {
-                                                                publishResultAutomatically();
-                                                            } else if (Long.parseLong(winD) <= Long.parseLong(timestamp)) {
-                                                                pubBtn.setVisibility(View.VISIBLE);
-                                                                relWinner.setVisibility(View.VISIBLE);
-                                                            } else {
-                                                                relWinner.setVisibility(View.GONE);
-                                                            }
-                                                        }
-                                                    });
+                                                    if (getActivity() != null) {
+                                                        getActivity().runOnUiThread(() -> {
+                                                            if (result) {
+                                                                pubBtn2.setVisibility(View.VISIBLE);
+                                                                relWinner.setVisibility(View.VISIBLE);
+                                                            } else {
+                                                                if ((Long.parseLong(winD) + 172800000) < Long.parseLong(timestamp)) {
+                                                                    publishResultAutomatically();
+                                                                } else if (Long.parseLong(winD) <= Long.parseLong(timestamp)) {
+                                                                    pubBtn.setVisibility(View.VISIBLE);
+                                                                    relWinner.setVisibility(View.VISIBLE);
+                                                                } else {
+                                                                    relWinner.setVisibility(View.GONE);
+                                                                }
+                                                            }
+                                                        });
+                                                    }
                                                 }
-                                            } catch (InterruptedException e) {
-                                                e.printStackTrace();
-                                            }
-                                        }
+                                                } catch(InterruptedException e){
+                                                    e.printStackTrace();
+                                                }
+                                            }
 
+                                            ;
+                                        }
+
                                         ;
-                                    };
                                     thread.start();
-                                }
+                                    }
+
                             }
 
                             @Override
Index: app/src/main/res/layout/fragment_editprofile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/topEditProfile\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <com.google.android.material.appbar.AppBarLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:backgroundTint=\"@color/white\">\r\n\r\n                <androidx.appcompat.widget.Toolbar\r\n                    android:id=\"@+id/profileToolbar\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n\r\n                    <RelativeLayout\r\n                        android:id=\"@+id/profileName\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\">\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/backarrow\"\r\n                            android:layout_width=\"30dp\"\r\n                            android:layout_height=\"30dp\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:layout_marginStart=\"10dp\"\r\n                            android:layout_marginLeft=\"10dp\"\r\n                            android:layout_marginEnd=\"20dp\"\r\n                            android:layout_marginRight=\"20dp\"\r\n                            android:src=\"@drawable/ic_back_black_arrow\" />\r\n\r\n                        <TextView\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_centerHorizontal=\"true\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:layout_marginLeft=\"5dp\"\r\n                            android:text=\"Edit Profile\"\r\n                            android:textColor=\"#000000\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/saveChanges\"\r\n                            android:layout_width=\"30dp\"\r\n                            android:layout_height=\"30dp\"\r\n                            android:layout_alignParentRight=\"true\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:layout_marginStart=\"10dp\"\r\n                            android:layout_marginLeft=\"10dp\"\r\n                            android:layout_marginEnd=\"20dp\"\r\n                            android:layout_marginRight=\"20dp\"\r\n                            android:src=\"@drawable/ic_checkmark\" />\r\n\r\n\r\n                    </RelativeLayout>\r\n                </androidx.appcompat.widget.Toolbar>\r\n\r\n\r\n            </com.google.android.material.appbar.AppBarLayout>\r\n\r\n        </RelativeLayout>\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/centerEditProfile\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_below=\"@+id/topEditProfile\"\r\n            android:paddingStart=\"10dp\"\r\n            android:paddingEnd=\"10dp\">\r\n\r\n            <ScrollView\r\n                android:layout_width=\"match_parent\"\r\n\r\n                android:layout_height=\"match_parent\">\r\n\r\n                <RelativeLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@color/white\"\r\n                    android:padding=\"2dp\">\r\n\r\n                    <de.hdodenhof.circleimageview.CircleImageView\r\n                        android:id=\"@+id/profile_photo\"\r\n                        android:layout_width=\"120dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        android:layout_marginTop=\"20dp\"\r\n                        app:civ_border_color=\"@color/scheme8\"\r\n                        app:civ_border_width=\"2dp\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/change_Profile_Photo\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@+id/profile_photo\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        android:text=\"Change Photo\"\r\n                        android:textColor=\"#03A9F4\"\r\n                        android:textSize=\"16sp\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/pi\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/change_Profile_Photo\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        android:layout_marginTop=\"30dp\"\r\n                        android:gravity=\"start\"\r\n                        android:text=\"Personal Info\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"22dp\" />\r\n                    <!--    username-->\r\n                    <RelativeLayout\r\n                        android:id=\"@+id/relLayout1\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"50dp\"\r\n                        android:layout_below=\"@+id/pi\"\r\n                        android:background=\"@color/white\">\r\n\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/username\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:background=\"@drawable/rectangular_border\"\r\n\r\n                            android:hint=\"Username\"\r\n                            android:inputType=\"textNoSuggestions\"\r\n\r\n                            android:padding=\"10dp\" />\r\n\r\n                    </RelativeLayout>\r\n                    <!--    display name-->\r\n                    <RelativeLayout\r\n                        android:id=\"@+id/relLayout2\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"50dp\"\r\n                        android:layout_below=\"@+id/relLayout1\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:background=\"@color/white\">\r\n\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/display_name\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:background=\"@drawable/rectangular_border\"\r\n                            android:hint=\"Display name\"\r\n                            android:inputType=\"textNoSuggestions\"\r\n                            android:padding=\"10dp\" />\r\n\r\n                    </RelativeLayout>\r\n\r\n\r\n                    <!--    website-->\r\n                    <RelativeLayout\r\n                        android:id=\"@+id/relLayout3\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@+id/relLayout2\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:background=\"@color/white\">\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/description\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:layout_alignParentEnd=\"true\"\r\n                            android:background=\"@drawable/rectangular_border\"\r\n                            android:hint=\"Sescription\"\r\n                            android:maxLines=\"5\"\r\n                            android:inputType=\"textNoSuggestions\"\r\n                            android:padding=\"10dp\" />\r\n\r\n                    </RelativeLayout>\r\n\r\n                    <RelativeLayout\r\n                        android:id=\"@+id/relLayout4\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@+id/relLayout3\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:background=\"@color/white\">\r\n\r\n                        <EditText\r\n                            android:id=\"@+id/externalLinks\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_centerVertical=\"true\"\r\n                            android:layout_alignParentEnd=\"true\"\r\n                            android:background=\"@drawable/rectangular_border\"\r\n                            android:hint=\"External Links\"\r\n                            android:maxLines=\"5\"\r\n                            android:inputType=\"textNoSuggestions\"\r\n                            android:padding=\"10dp\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/addLink\"\r\n                            android:layout_width=\"50dp\"\r\n                            android:layout_height=\"50dp\"\r\n                            android:padding=\"5dp\"\r\n                            android:src=\"@drawable/ic_baseline_add_24\"\r\n                            android:layout_alignParentEnd=\"true\"\r\n                            android:layout_alignParentTop=\"true\"\r\n                            android:layout_alignParentBottom=\"true\"\r\n                            app:tint=\"@color/scheme8\" />\r\n\r\n                    </RelativeLayout>\r\n                    <RelativeLayout\r\n                        android:paddingStart=\"10dp\"\r\n                        android:id=\"@+id/relLayout5\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:layout_below=\"@+id/relLayout4\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        tools:ignore=\"RtlSymmetry\">\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/link1\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:gravity=\"center\"\r\n                            android:layout_alignParentStart=\"true\"\r\n                            android:textColor=\"@color/dot_dark_screen3\"\r\n                            android:text=\"External Links\"\r\n                            android:textSize=\"16sp\"\r\n                            android:inputType=\"textNoSuggestions\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/link1delete\"\r\n                            android:layout_width=\"24dp\"\r\n                            android:layout_height=\"24dp\"\r\n                            android:layout_alignParentTop=\"true\"\r\n                            android:layout_alignParentBottom=\"true\"\r\n                            android:padding=\"5dp\"\r\n                            android:layout_marginStart=\"15dp\"\r\n                            android:layout_toRightOf=\"@+id/link1\"\r\n                            android:src=\"@drawable/ic_baseline_close_24\" />\r\n\r\n                    </RelativeLayout>\r\n                    <RelativeLayout\r\n                        android:paddingStart=\"10dp\"\r\n                        android:id=\"@+id/relLayout6\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:layout_below=\"@+id/relLayout5\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        tools:ignore=\"RtlSymmetry\">\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/link2\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_alignParentStart=\"true\"\r\n                            android:gravity=\"center\"\r\n                            android:inputType=\"textNoSuggestions\"\r\n                            android:text=\"External Links\"\r\n                            android:textColor=\"@color/dot_dark_screen3\"\r\n                            android:textSize=\"16sp\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/link2delete\"\r\n                            android:layout_width=\"24dp\"\r\n                            android:layout_height=\"24dp\"\r\n                            android:layout_alignParentTop=\"true\"\r\n                            android:layout_alignParentBottom=\"true\"\r\n                            android:padding=\"5dp\"\r\n                            android:layout_marginStart=\"15dp\"\r\n                            android:layout_toRightOf=\"@+id/link2\"\r\n                            android:src=\"@drawable/ic_baseline_close_24\" />\r\n\r\n                    </RelativeLayout>\r\n                    <RelativeLayout\r\n                        android:paddingStart=\"10dp\"\r\n                        android:id=\"@+id/relLayout7\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:layout_below=\"@+id/relLayout6\"\r\n                        android:layout_marginTop=\"5dp\"\r\n                        tools:ignore=\"RtlSymmetry\">\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/link3\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:gravity=\"center\"\r\n                            android:layout_alignParentStart=\"true\"\r\n                            android:textColor=\"@color/dot_dark_screen3\"\r\n                            android:text=\"External Links\"\r\n                            android:textSize=\"16sp\"\r\n                            android:inputType=\"textNoSuggestions\" />\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/link3delete\"\r\n                            android:layout_width=\"24dp\"\r\n                            android:layout_height=\"24dp\"\r\n                            android:layout_alignParentTop=\"true\"\r\n                            android:layout_alignParentBottom=\"true\"\r\n                            android:padding=\"5dp\"\r\n                            android:layout_marginStart=\"15dp\"\r\n                            android:layout_toRightOf=\"@+id/link3\"\r\n                            android:src=\"@drawable/ic_baseline_close_24\" />\r\n\r\n                    </RelativeLayout>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/pl\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/relLayout7\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        android:layout_marginTop=\"50dp\"\r\n                        android:background=\"@drawable/grey_border_bottom\"\r\n                        android:gravity=\"start\"\r\n                        android:text=\"Connections\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"22dp\" />\r\n\r\n                    <RelativeLayout\r\n                        android:id=\"@+id/profileLinks\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/pl\"\r\n                        android:layout_alignParentStart=\"true\"\r\n                        android:layout_alignParentEnd=\"true\"\r\n                        android:layout_marginTop=\"10dp\">\r\n\r\n                        <LinearLayout\r\n                            android:id=\"@+id/linksLine\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"horizontal\"\r\n                            android:weightSum=\"5\">\r\n\r\n                            <LinearLayout\r\n                                android:id=\"@+id/gmail_link\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_weight=\"1\"\r\n                                android:orientation=\"vertical\"\r\n                                android:weightSum=\"10\">\r\n\r\n                                <ImageView\r\n                                    android:layout_width=\"40dp\"\r\n                                    android:layout_height=\"40dp\"\r\n                                    android:layout_weight=\"3\"\r\n                                    android:elevation=\"3dp\"\r\n                                    android:src=\"@drawable/ic_gmail_logo\"\r\n                                    tools:ignore=\"NestedWeights\" />\r\n\r\n\r\n                            </LinearLayout>\r\n\r\n                            <LinearLayout\r\n                                android:id=\"@+id/instagram_link\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_weight=\"1\"\r\n                                android:orientation=\"vertical\"\r\n                                android:weightSum=\"10\">\r\n\r\n                                <ImageView\r\n                                    android:layout_width=\"40dp\"\r\n                                    android:layout_height=\"40dp\"\r\n                                    android:layout_weight=\"3\"\r\n                                    android:elevation=\"3dp\"\r\n                                    android:src=\"@drawable/ic_insta_logo\"\r\n                                    tools:ignore=\"NestedWeights\" />\r\n\r\n\r\n                            </LinearLayout>\r\n\r\n                            <LinearLayout\r\n                                android:id=\"@+id/facebook_link\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_weight=\"1\"\r\n                                android:orientation=\"vertical\"\r\n                                android:weightSum=\"15\">\r\n\r\n                                <ImageView\r\n                                    android:layout_width=\"40dp\"\r\n                                    android:layout_height=\"40dp\"\r\n                                    android:layout_weight=\"3\"\r\n                                    android:elevation=\"3dp\"\r\n                                    android:src=\"@drawable/ic_fb_logo\"\r\n                                    tools:ignore=\"NestedWeights\" />\r\n\r\n\r\n                            </LinearLayout>\r\n\r\n                            <LinearLayout\r\n                                android:id=\"@+id/twitter_link\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_weight=\"1\"\r\n                                android:orientation=\"vertical\"\r\n                                android:weightSum=\"10\">\r\n\r\n                                <ImageView\r\n                                    android:layout_width=\"40dp\"\r\n                                    android:layout_height=\"40dp\"\r\n                                    android:layout_weight=\"3\"\r\n                                    android:elevation=\"3dp\"\r\n                                    android:src=\"@drawable/ic_twitter_logo\"\r\n                                    tools:ignore=\"NestedWeights\" />\r\n\r\n                            </LinearLayout>\r\n\r\n                            <LinearLayout\r\n                                android:id=\"@+id/whatsapp_link\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_weight=\"1\"\r\n                                android:orientation=\"vertical\"\r\n                                android:weightSum=\"10\">\r\n\r\n                                <ImageView\r\n                                    android:layout_width=\"40dp\"\r\n                                    android:layout_height=\"40dp\"\r\n                                    android:layout_weight=\"3\"\r\n                                    android:elevation=\"3dp\"\r\n                                    android:src=\"@drawable/ic_whatsapp_logo\"\r\n                                    tools:ignore=\"NestedWeights\" />\r\n\r\n\r\n                            </LinearLayout>\r\n                        </LinearLayout>\r\n\r\n                    </RelativeLayout>\r\n\r\n\r\n                </RelativeLayout>\r\n            </ScrollView>\r\n\r\n        </RelativeLayout>\r\n    </RelativeLayout>\r\n</androidx.coordinatorlayout.widget.CoordinatorLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_editprofile.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout/fragment_editprofile.xml	(date 1605876542961)
@@ -345,6 +345,7 @@
                             android:layout_width="match_parent"
                             android:layout_height="wrap_content"
                             android:orientation="horizontal"
+                            android:layout_marginBottom="20dp"
                             android:weightSum="5">
 
                             <LinearLayout
Index: app/src/main/res/layout/activity_post_photo.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white\"\r\n    tools:context=\".profile.PostPhotoActivity\">\r\n\r\n    <com.google.android.material.appbar.AppBarLayout\r\n        android:id=\"@+id/profileToolbar\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_alignParentTop=\"true\"\r\n        android:background=\"@drawable/white_border\">\r\n\r\n        <androidx.appcompat.widget.Toolbar\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/backarrow\"\r\n                    android:layout_width=\"35dp\"\r\n                    android:layout_height=\"35dp\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginEnd=\"20dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:src=\"@drawable/ic_back_black_arrow\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"5dp\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:text=\"Post Photo\"\r\n                    android:textColor=\"#000000\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/post\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentEnd=\"true\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginRight=\"15dp\"\r\n                    android:text=\"Post\"\r\n                    android:textColor=\"@color/scheme8\"\r\n                    android:textSize=\"18sp\"\r\n                    />\r\n\r\n\r\n            </RelativeLayout>\r\n        </androidx.appcompat.widget.Toolbar>\r\n    </com.google.android.material.appbar.AppBarLayout>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@+id/profileToolbar\"\r\n        android:layout_marginLeft=\"15dp\"\r\n        android:layout_marginRight=\"15dp\"\r\n        android:layout_marginBottom=\"15dp\"\r\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/inputCaption\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:layout_below=\"@+id/imageshare\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginBottom=\"20dp\"\r\n            android:backgroundTint=\"@color/white\"\r\n\r\n            android:hint=\"Enter and Interesting Title or Caption\"\r\n            android:imeOptions=\"actionNext\"\r\n            android:inputType=\"textFilter\"\r\n            android:textColor=\"@color/black\"\r\n            android:textColorHint=\"@color/grey\"\r\n            android:textSize=\"18sp\" />\r\n\r\n        <View\r\n            android:id=\"@+id/captionLine\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_below=\"@+id/inputCaption\"\r\n            android:background=\"#E5E6EB\" />\r\n\r\n        <com.orion.orion.util.SquareImageView\r\n            android:id=\"@+id/imageshare\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_marginTop=\"5dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerHorizontal=\"true\"/>\r\n\r\n        <com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton\r\n            android:id=\"@+id/fab\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"bottom|end\"\r\n            android:layout_alignParentBottom=\"true\"\r\n            android:layout_alignParentRight=\"true\"\r\n            android:text=\"Pick Photo\"\r\n            android:layout_margin=\"20dp\"\r\n            android:textAllCaps=\"false\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:textColor=\"@color/white\"\r\n            app:backgroundTint=\"@color/scheme8\"\r\n            app:iconTint=\"@color/white\" />\r\n\r\n    </RelativeLayout>\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_post_photo.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout/activity_post_photo.xml	(date 1605874747852)
@@ -76,7 +76,7 @@
             android:layout_marginBottom="20dp"
             android:backgroundTint="@color/white"
 
-            android:hint="Enter and Interesting Title or Caption"
+            android:hint="Enter Caption"
             android:imeOptions="actionNext"
             android:inputType="textFilter"
             android:textColor="@color/black"
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <color name=\"gray_scale\">#8affffff</color>\r\n    <color name=\"progress_max_active\">@color/white</color>\r\n    <color name=\"progress_primary\">@color/white</color>\r\n    <color name=\"progress_secondary\">@color/gray_scale</color>\r\n    <declare-styleable name=\"StoriesProgressView2\">\r\n        <attr name=\"progressCount\" format=\"integer|reference\" />\r\n    </declare-styleable>\r\n\r\n    <dimen name=\"progress_bar_height\">2dp</dimen>\r\n    <string name=\"app_name\">orion</string>\r\n\r\n    <!--    Databases-->\r\n\r\n    <string name=\"edit_profile\">Edit Pofile</string>\r\n    <string name=\"sign_out\">Sign Out</string>\r\n    <string name=\"profie_fragment\">Profile</string>\r\n    <string name=\"view_post_fragment\">View Post</string>\r\n    <string name=\"calling_activity\">calling_activity</string>\r\n    <string name=\"profile_activity\">profile_activity</string>\r\n\r\n    <string name=\"confirm_password_dialog\">ConfirmPasswordDialog</string>\r\n\r\n\r\n    <string name=\"selected_image\">selected_image</string>\r\n    <string name=\"selected_bitmap\">selected_bitmap</string>\r\n\r\n    <string name=\"return_to_fragment\">return_to_fragment</string>\r\n    <string name=\"activity_number\">activity_number</string>\r\n\r\n    <string name=\"comments\">Comments</string>\r\n    <string name=\"view_comment_fragment\">View Comments</string>\r\n\r\n    <string name=\"search_activity\">Search Activity</string>\r\n    <string name=\"intent_user\">intent_user</string>\r\n    <string name=\"view_profile_fragment\">ViewProfile</string>\r\n\r\n    <string name=\"bundle_user_accountsetting\">bundle_user_accountsetting</string>\r\n    <string name=\"bundle_photo\">bundle_photo</string>\r\n    <string name=\"home\">Home Activity</string>\r\n    <string name=\"his_UID\">his_UID</string>\r\n\r\n    <string name=\"entryfee_prompt\">Select here</string>\r\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\r\n    <string name=\"descrip\">Andreu World launches its 20th international design contest and opens registration for 2020 to both students and professionals worldwide. Participants are invited to design an item of furniture (chair and/or table) based on specifications provided in a brief. The best design for 2020 will be awarded with 4,000 Euro and the second-best, with 2,000 Euro. A maximum of four (4) non-monetary prizes will also be announced. The competition briefing implies the following requirements:</string>\r\n    <string name=\"rule\">Chairs (chairs, armchairs, lounge chairs, stools, benches and sofas): The main material shall be wood and upholstery. Beech, ash, oak, or walnut should be the wood species utilized, in either solid or plywood version. The Kvadrat textile collections should be used for upholstered pieces. The use of other materials such as metal, thermopolymer, and aluminum will also be accepted. Tables (meeting table, living tables and occasional tables): The principal material shall be Solid Textile Board by Really  a high-density material manufactured from Kvadrat textiles at the end of their life-cycle. The use of other materials such as wood, plywood, laminate, glass, metal, thermopolymer, and natural stones will be accepted. All designs presented should be new, not having been marketed or disclosed prior to the date of the Contest.</string>\r\n\r\n\r\n    <!-- Databses names-->\r\n    <string name=\"dbname_users\">users</string>\r\n    <string name=\"dbname_contests\">Contests</string>\r\n    <string name=\"dbname_follower\">followers</string>\r\n    <string name=\"dbname_following\">following</string>\r\n    <string name=\"dbname_user_photos\">user_photos</string>\r\n    <string name=\"dbname_contestlist\">ContestList</string>\r\n    <string name=\"dbname_participantList\">ParticipantList</string>\r\n    <string name=\"dbname_leaderboard\">Leaderboard</string>\r\n    <string name=\"dbname_Chats\">Chats</string>\r\n    <string name=\"dbname_request\">Requests</string>\r\n    <string name=\"dbname_promote\">Promote</string>\r\n    <string name=\"dbname_reports\">Reports</string>\r\n    <string name=\"dbname_ChatList\">ChatList</string>\r\n    <string name=\"db_topUsersParams\">db_topUsersParams</string>\r\n    <string name=\"dbname_username\">username</string>\r\n\r\n\r\n    <!-- Field Names -->\r\n    <string name=\"field_followers\">f</string>\r\n    <string name=\"field_promotes\">pmt</string>\r\n    <string name=\"field_contest_title\">ct</string>\r\n    <string name=\"field_contest_organized_by\">cob</string>\r\n    <string name=\"field_contest_description\">cd</string>\r\n    <string name=\"field_all_time\">at</string>\r\n    <string name=\"field_yearly\">y</string>\r\n    <string name=\"field_last_month\">lm</string>\r\n    <string name=\"field_this_month\">tm</string>\r\n    <string name=\"field_last_week\">lw</string>\r\n    <string name=\"field_this_week\">tw</string>\r\n    <string name=\"field_contest\">c</string>\r\n    <string name=\"field_last_updated\">lu</string>\r\n    <string name=\"field_last_known_location\">lkl</string>\r\n    <string name=\"field_month\">m</string>\r\n    <string name=\"field_country\">cntry</string>\r\n    <string name=\"field_city\">cty</string>\r\n    <string name=\"field_area\">area</string>\r\n    <string name=\"field_domain\">d</string>\r\n    <string name=\"field_post\">p</string>\r\n    <string name=\"post_updates\">pu</string>\r\n    <string name=\"thumbnail\">t</string>\r\n    <string name=\"type\">ty</string>\r\n    <string name=\"field_last_updated_topUsers\">luu</string>\r\n    <string name=\"field_overall\">o</string>\r\n    <string name=\"field_completed\">cmp</string>\r\n    <string name=\"contest_update\">cu</string>\r\n    <string name=\"changedFollowers\">cf</string>\r\n    <string name=\"changedJoinedContest\">cjc</string>\r\n    <string name=\"changedCreatedContest\">ccc</string>\r\n    <string name=\"field_instagram\">in</string>\r\n    <string name=\"field_facebook\">fb</string>\r\n    <string name=\"field_twitter\">tw</string>\r\n    <string name=\"field_whatsapp\">wa</string>\r\n    <string name=\"db_posts_deleted\">dp</string>\r\n    <string name=\"explore_update\">eu</string>\r\n    <string name=\"field_link1\">l1</string>\r\n    <string name=\"field_link2\">l2</string>\r\n    <string name=\"field_link3\">l3</string>\r\n    <string name=\"created_contest\">cc</string>\r\n    <string name=\"joined_contest\">jc</string>\r\n    <string name=\"voting_list\">vl</string>\r\n    <string name=\"juryMarks\">jm</string>\r\n    <string name=\"field_comment\">cmnt</string>\r\n    <string name=\"profile_photo\">pp</string>\r\n    <string name=\"field_likes\">l</string>\r\n    <string name=\"field_image_path\">ip</string>\r\n    <string name=\"field_username\">u</string>\r\n    <string name=\"field_email\">e</string>\r\n    <string name=\"field_display_name\">dn</string>\r\n    <string name=\"field_user_id\">ui</string>\r\n    <string name=\"field_website\">web</string>\r\n    <string name=\"field_description\">des</string>\r\n    <string name=\"field_phone_number\">pn</string>\r\n    <string name=\"field_Notifications\">n</string>\r\n    <string name=\"field_caption\">cap</string>\r\n    <string name=\"field_date_createdr\">dc</string>\r\n    <string name=\"field_photo_id\">pi</string>\r\n    <string name=\"field_tags\">tg</string>\r\n    <string name=\"field_Participant_List\">pl</string>\r\n    <string name=\"gp_displayer_tittle\">GP:GENUINE PERCENTAGE</string>\r\n    <string name=\"delete_message_prompt\">Are you sure, you want to delete this message?</string>\r\n    <string name=\"delete_post_prompt\">Are you sure, you want to delete this Post?</string>\r\n    <string name=\"remove_promotion_prompt\">\"Are you sure, you want to remove this Promotion?\"</string>\r\n    <string name=\"promotion_prompt\">\"Are you sure, you want to promote this Post?\"</string>\r\n\r\n    <string name=\"field_contest_completed\">c_cmp</string>\r\n    <string name=\"field_contest_reports\">c_rprt</string>\r\n    <string name=\"field_contest_report_list\">rl</string>\r\n    <string name=\"report_prompt\">Are you sure, you want to Report this Contest?</string>\r\n    <string name=\"report_post_prompt\">Are you sure, you want to Report this Post?</string>\r\n\r\n    <string name=\"gp_diplayer_description\">This is the percentage showing how much genuine this host is.</string>\r\n    <string name=\"field_total_voters_list\">tvl</string>\r\n    <string name=\"delete_notification_prompt\">Are you sure, you want to delete this Notification?</string>\r\n    <string name=\"remove_participant_prompt\">Are you sure, you want to remove this Participant?</string>\r\n    <string name=\"field_status\">st</string>\r\n    <string name=\"field_joined_updates\">ju</string>\r\n    <string name=\"reject_participant_prompt\">Are you sure, you want to Reject this Participant?</string>\r\n    <string name=\"allow_participanr_prompt\">Are you sure, you want to Allow this Participant?</string>\r\n    <string name=\"field_open_for\">of</string>\r\n    <string name=\"field_view\">v</string>\r\n    <string name=\"field_total_score\">ts</string>\r\n    <string name=\"field_rule\">rul</string>\r\n    <string name=\"field_contest_created_updates\">ccu</string>\r\n    <string name=\"field_contest_joined_updates\">cju</string>\r\n    <string name=\"field_result\">r</string>\r\n    <string name=\"field_media_link\">ml</string>\r\n    <string name=\"field_jury_pic_1\">jp1</string>\r\n    <string name=\"field_jury_pic_2\">jp2</string>\r\n    <string name=\"field_jury_pic_3\">jp3</string>\r\n    <string name=\"field_poster\">po</string>\r\n    <string name=\"field_id_link\">il</string>\r\n    <string name=\"field_contest_judged\">cj</string>\r\n    <string name=\"field_contest_wins\">cw</string>\r\n    <string name=\"field_contest_participated\">cp</string>\r\n    <string name=\"field_sender_ID\">sid</string>\r\n    <string name=\"field_receiver_ID\">rid</string>\r\n    <string name=\"field_message\">msg</string>\r\n    <string name=\"field_timestamp\">tim</string>\r\n    <string name=\"field_if_seen\">ifs</string>\r\n    <string name=\"field_message_ID\">mid</string>\r\n    <string name=\"field_entry_fee\">ef</string>\r\n    <string name=\"field_contest_ID\">ci</string>\r\n    <string name=\"field_vote_type\">vt</string>\r\n    <string name=\"field_registration_begin\">rb</string>\r\n    <string name=\"field_registration_end\">re</string>\r\n    <string name=\"field_voting_begin\">vb</string>\r\n    <string name=\"field_voting_end\">ve</string>\r\n    <string name=\"field_max_participant_limit\">mLt</string>\r\n    <string name=\"field_winners_declare\">wd</string>\r\n    <string name=\"field_file_type\">ft</string>\r\n    <string name=\"field_total_prize\">tp</string>\r\n    <string name=\"field_place1_prize\">p1</string>\r\n    <string name=\"field_place2_prize\">p2</string>\r\n    <string name=\"field_place3_prize\">p3</string>\r\n    <string name=\"field_jury_name_1\">jn1</string>\r\n    <string name=\"field_jury_name_2\">jn2</string>\r\n    <string name=\"field_jury_name_3\">jn3</string>\r\n    <string name=\"field_host\">hst</string>\r\n    <string name=\"field_college\">clg</string>\r\n    <string name=\"field_joining_ID\">ji</string>\r\n    <string name=\"field_jury_comment1\">c1</string>\r\n    <string name=\"field_jury_comment2\">c2</string>\r\n    <string name=\"field_jury_comment3\">c3</string>\r\n    <string name=\"field_jury_1\">j1</string>\r\n    <string name=\"field_jury_2\">j2</string>\r\n    <string name=\"field_jury_3\">j3</string>\r\n    <string name=\"field_notification_message\">not</string>\r\n\r\n    <string name=\"field_promotion_time_start\">tiS</string>\r\n    <string name=\"field_promotion_time_end\">tiE</string>\r\n    <string name=\"field_promoter_ID\">pID</string>\r\n    <string name=\"field_story_ID\">stID</string>\r\n    <string name=\"field_rating\">rat</string>\r\n    <string name=\"field_unfollowed_Me\">um</string>\r\n    <string name=\"Privacy_Policy\">https://drive.google.com/file/d/1Kat9jq_H9vXxNWXmKfP4N3XerfpfHkw5/view?usp=sharing</string>\r\n    <string name=\"Terms_and_Condition\">https://drive.google.com/file/d/1t8XtHgyhvhWlWPlqoG8MREP56kFuEhPL/view?usp=sharing</string>\r\n\r\n\r\n    <string-array name=\"entryfee\">\r\n        <item>Select here</item>\r\n        <item>Free</item>\r\n        <item>Paid</item>\r\n    </string-array>\r\n\r\n    <string-array name=\"entryfee2\">\r\n        <item>Overall</item>\r\n        <item>Free</item>\r\n        <item>Paid</item>\r\n    </string-array>\r\n\r\n    <string-array name=\"domain\">\r\n        <item>All</item>\r\n        <item>Speaker</item>\r\n        <item>Chef</item>\r\n        <item>Cinematographer</item>\r\n        <item>Dancer</item>\r\n        <item>Instrument Player</item>\r\n        <item>Editor</item>\r\n        <item>Fashion Designer</item>\r\n        <item>Actor</item>\r\n        <item>Film maker</item>\r\n        <item>Gamer</item>\r\n        <item>Makeup Artist</item>\r\n        <item>Model</item>\r\n        <item>Singer</item>\r\n        <item>Musician</item>\r\n        <item>Sketch Artist</item>\r\n        <item>Poet</item>\r\n        <item>Photographer</item>\r\n        <item>Rapper</item>\r\n        <item>Sports</item>\r\n        <item>Writer</item>\r\n        <item>Digital Art</item>\r\n\r\n\r\n    </string-array>\r\n    <string-array name=\"domain2\">\r\n        <item>Overall</item>\r\n        <item>Speaker</item>\r\n        <item>Chef</item>\r\n        <item>Cinematographer</item>\r\n        <item>Dancer</item>\r\n        <item>Instrument Player</item>\r\n        <item>Editor</item>\r\n        <item>Fashion Designer</item>\r\n        <item>Actor</item>\r\n        <item>Film maker</item>\r\n        <item>Gamer</item>\r\n        <item>Makeup Artist</item>\r\n        <item>Model</item>\r\n        <item>Singer</item>\r\n        <item>Musician</item>\r\n        <item>Sketch Artist</item>\r\n        <item>Poet</item>\r\n        <item>Photographer</item>\r\n        <item>Rapper</item>\r\n        <item>Sports</item>\r\n        <item>Writer</item>\r\n        <item>Digital Art</item>\r\n\r\n    </string-array>\r\n\r\n    <string-array name=\"juryNumber\">\r\n        <item>Select here</item>\r\n        <item>1</item>\r\n        <item>2</item>\r\n        <item>3</item>\r\n\r\n    </string-array>\r\n\r\n    <string-array name=\"prize\">\r\n        <item>Select here</item>\r\n        <item>No</item>\r\n        <item>Yes</item>\r\n\r\n    </string-array>\r\n\r\n\r\n</resources>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/strings.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/values/strings.xml	(date 1605862047565)
@@ -89,7 +89,7 @@
     <string name="thumbnail">t</string>
     <string name="type">ty</string>
     <string name="field_last_updated_topUsers">luu</string>
-    <string name="field_overall">o</string>
+    <string name="field_overall">Overall</string>
     <string name="field_completed">cmp</string>
     <string name="contest_update">cu</string>
     <string name="changedFollowers">cf</string>
Index: app/src/main/res/layout/fragment_mainfeed_listitem.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_marginTop=\"50dp\"\r\n            android:layout_marginBottom=\"50dp\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <androidx.cardview.widget.CardView\r\n                android:id=\"@+id/relLayout1\"\r\n\r\n                app:cardUseCompatPadding=\"true\"\r\n                app:cardCornerRadius=\"5dp\"\r\n\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\">\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:id=\"@+id/header\"\r\n                android:background=\"@drawable/rectangular_border\"\r\n                android:layout_height=\"50dp\">\r\n\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/ivEllipses\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginRight=\"6dp\"\r\n                    android:src=\"@drawable/ic_eclipse_white\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/username\"\r\n                    android:layout_width=\"150dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_toRightOf=\"@id/profile_photo\"\r\n                    android:maxLines=\"1\"\r\n                    android:text=\"username\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"17sp\" />\r\n\r\n\r\n                <TextView\r\n                    android:id=\"@+id/domain12\"\r\n                    android:layout_width=\"150dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:gravity=\"right\"\r\n                    android:layout_toLeftOf=\"@+id/ivEllipses\"\r\n                    android:text=\"Photographer\"\r\n                    android:fontFamily=\"@font/orion\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:maxLines=\"1\"\r\n                    android:textSize=\"15sp\"\r\n                    android:layout_marginStart=\"10dp\" />\r\n                <TextView\r\n                    android:id=\"@+id/images_time\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@id/username\"\r\n                    android:layout_toRightOf=\"@+id/profile_photo\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n\r\n                    android:text=\"N DAYS AGO\"\r\n                    android:textColor=\"@color/grey\"\r\n                    android:textSize=\"8dp\" />\r\n\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    android:id=\"@+id/profile_photo\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_marginTop=\"20dp\"\r\n                    app:civ_border_color=\"#000000\"\r\n                    app:civ_border_width=\"0.5dp\" />\r\n\r\n            </RelativeLayout>\r\n            </androidx.cardview.widget.CardView>\r\n            <RelativeLayout\r\n                android:id=\"@+id/relLayout2\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/post_imagelayout\"\r\n              >\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/starlayout\"\r\n                    android:layout_width=\"60dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    >\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/image_star\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:src=\"@drawable/ic_star_black\"\r\n                        android:visibility=\"visible\" />\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/image_star_yellow\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:src=\"@drawable/ic_star_color\"\r\n                        android:visibility=\"invisible\" />\r\n\r\n\r\n                </RelativeLayout>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/comment_layout\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    >\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/image_shoutout\"\r\n                        android:layout_width=\"30dp\"\r\n                        android:layout_height=\"30dp\"\r\n                        android:layout_marginLeft=\"4dp\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:src=\"@drawable/ic_comment_black\"\r\n                        android:visibility=\"visible\" />\r\n                </RelativeLayout>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/likes_number\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/starlayout\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginLeft=\"5dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:text=\"0\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/comments_number\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/comment_layout\"\r\n                    android:layout_marginLeft=\"12dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:text=\"0\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"15dp\" />\r\n                <RelativeLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:id=\"@+id/promotion\">\r\n                <ImageView\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:src=\"@drawable/ic_promote_black\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_marginRight=\"4dp\"\r\n                    android:id=\"@+id/promote\"/>\r\n                <ImageView\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginRight=\"4dp\"\r\n\r\n                    android:src=\"@drawable/ic_promote_yellow\"\r\n                    android:visibility=\"gone\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:id=\"@+id/promoted\"/>\r\n                </RelativeLayout>\r\n                <TextView\r\n                    android:id=\"@+id/promote_number\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/promotion\"\r\n                    android:layout_marginRight=\"5dp\"\r\n\r\n                    android:text=\"0\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/relLayout3\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/relLayout2\"\r\n                android:layout_marginBottom=\"1dp\"\r\n                android:padding=\"10dp\">\r\n\r\n\r\n                <TextView\r\n                    android:id=\"@+id/image_caption\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:text=\"naman.mahendra mountain #mountain\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"16dp\" />\r\n\r\n\r\n\r\n\r\n            </RelativeLayout>\r\n            <RelativeLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/relLayout1\"\r\n                android:id=\"@+id/post_imagelayout\"\r\n\r\n                >\r\n                <androidx.cardview.widget.CardView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    app:cardBackgroundColor=\"@color/white\"\r\n                    app:cardUseCompatPadding=\"true\"\r\n                    app:cardCornerRadius=\"5dp\"\r\n                    android:elevation=\"5dp\"\r\n\r\n                    android:outlineAmbientShadowColor=\"@color/white\"\r\n                    >\r\n                    <com.orion.orion.util.SquareImageView\r\n                        android:id=\"@+id/frame\"\r\n                        android:visibility=\"visible\"\r\n                        android:src=\"@drawable/square\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        />\r\n\r\n                    <com.google.android.exoplayer2.ui.PlayerView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:id=\"@+id/player_view\"\r\n                        app:resize_mode=\"fit\"\r\n                        app:hide_on_touch=\"true\"\r\n                        android:visibility=\"visible\"\r\n                        app:show_timeout=\"5000\"\r\n                        app:rewind_increment=\"10000\"\r\n                        app:fastforward_increment=\"10000\"\r\n                        app:use_controller=\"false\"\r\n                        app:surface_type=\"texture_view\"\r\n                        android:background=\"@drawable/square\"\r\n                        app:player_layout_id=\"@layout/exo_simple_player_view\"\r\n                        app:controller_layout_id=\"@layout/custom_controller\"/>\r\n\r\n                    <com.orion.orion.util.SquareImageView\r\n                        android:id=\"@+id/thumbnail\"\r\n                        android:visibility=\"visible\"\r\n                        android:src=\"@drawable/square\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        />\r\n\r\n\r\n                    <ImageView\r\n                        android:layout_width=\"60dp\"\r\n                        android:layout_height=\"60dp\"\r\n                        android:src=\"@drawable/ic_play_black_logo\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:id=\"@+id/play\"/>\r\n\r\n                    <ProgressBar\r\n                        android:layout_width=\"80dp\"\r\n                        android:layout_height=\"80dp\"\r\n                        android:visibility=\"gone\"\r\n                        android:id=\"@+id/progress_bar\"\r\n                        android:layout_gravity=\"center\"\r\n                    />\r\n                    <ImageView\r\n                        android:layout_width=\"25dp\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:src=\"@drawable/ic_unmute_black\"\r\n                        android:layout_gravity=\"bottom\"\r\n                        android:layout_margin=\"10dp\"\r\n                        android:visibility=\"gone\"\r\n\r\n                        android:id=\"@+id/unmute\"\r\n                        />\r\n                    <ImageView\r\n                        android:layout_width=\"25dp\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:layout_margin=\"10dp\"\r\n                        android:layout_gravity=\"bottom\"\r\n\r\n                        android:visibility=\"gone\"\r\n                        android:src=\"@drawable/ic_mute_black\"\r\n                        android:id=\"@+id/mute\"\r\n                        />\r\n                    <TextView\r\n                        android:layout_width=\"25dp\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:text=\"12\"\r\n                        android:visibility=\"gone\"\r\n                        android:gravity=\"center\"\r\n                        android:background=\"@drawable/ic_white_circle\"\r\n                        android:textColor=\"#000000\"\r\n                        android:layout_gravity=\"right\"\r\n                        android:layout_margin='10dp'\r\n                        android:id=\"@+id/duration\"/>\r\n\r\n                <com.orion.orion.util.SquareImageView\r\n                    android:id=\"@+id/post_image\"\r\n                    android:visibility=\"gone\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                  />\r\n                    <com.orion.orion.util.SquareImageView\r\n                        android:id=\"@+id/progress\"\r\n                        android:visibility=\"gone\"\r\n                        android:src=\"@drawable/load\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        />\r\n\r\n <TextView\r\n                        android:id=\"@+id/credit\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"bottom|right\"\r\n                        android:layout_margin=\"3dp\"\r\n                        android:layout_marginBottom=\"1dp\"\r\n\r\n                        android:background=\"@color/black\"\r\n\r\n                        android:padding=\"2dp\"\r\n                        android:text=\"username\"\r\n                        android:textColor=\"@color/white\"\r\n                        android:textSize=\"10sp\" />\r\n\r\n                </androidx.cardview.widget.CardView>\r\n\r\n\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n        </RelativeLayout>\r\n\r\n    </ScrollView>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_mainfeed_listitem.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout/fragment_mainfeed_listitem.xml	(date 1605880669601)
@@ -62,7 +62,7 @@
                     android:layout_marginLeft="10dp"
                     android:gravity="right"
                     android:layout_toLeftOf="@+id/ivEllipses"
-                    android:text="Photographer"
+                    android:text=""
                     android:fontFamily="@font/orion"
                     android:textColor="@color/black"
                     android:maxLines="1"
@@ -328,14 +328,7 @@
                     android:layout_height="wrap_content"
                     android:layout_centerHorizontal="true"
                   />
-                    <com.orion.orion.util.SquareImageView
-                        android:id="@+id/progress"
-                        android:visibility="gone"
-                        android:src="@drawable/load"
-                        android:layout_width="match_parent"
-                        android:layout_height="wrap_content"
-                        android:layout_centerHorizontal="true"
-                        />
+
 
  <TextView
                         android:id="@+id/credit"
Index: app/src/main/res/layout/layout_view_post.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            >\r\n\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/relLayout1\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n\r\n                android:background=\"@color/scheme8\">\r\n\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/ivEllipses\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:src=\"@drawable/ic_whilte_eclipse\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/username1\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_toRightOf=\"@id/profile_photo1\"\r\n                    android:text=\"Username\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"20sp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/images_time\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@id/username1\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginLeft=\"10dp\"\r\n                    android:layout_toRightOf=\"@+id/profile_photo1\"\r\n\r\n                    android:text=\"N DAYS AGO\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"8dp\" />\r\n\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    android:id=\"@+id/profile_photo1\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:layout_marginLeft=\"25dp\"\r\n                    android:layout_marginTop=\"20dp\"\r\n                    app:civ_border_color=\"#0e1111\"\r\n                    app:civ_border_width=\"0.5dp\" />\r\n\r\n            </RelativeLayout>\r\n\r\n\r\n            <com.google.android.material.card.MaterialCardView\r\n                android:theme=\"@style/CustomCardViewStyle\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:id=\"@+id/qwe\"\r\n                app:cardBackgroundColor=\"@color/scheme8\"\r\n                android:layout_below=\"@+id/relLayout1\"\r\n             >\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                >\r\n\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/post_imagelayout\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginBottom=\"50dp\"\r\n\r\n                >\r\n                <androidx.cardview.widget.CardView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    app:cardBackgroundColor=\"@color/white\"\r\n                    app:cardCornerRadius=\"10dp\"\r\n                   >\r\n                    <com.orion.orion.util.SquareImageView\r\n                        android:id=\"@+id/frame\"\r\n                        android:visibility=\"visible\"\r\n                        android:src=\"@drawable/square\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        />\r\n\r\n                    <com.google.android.exoplayer2.ui.PlayerView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:id=\"@+id/player_view\"\r\n                        app:resize_mode=\"fit\"\r\n                        app:hide_on_touch=\"true\"\r\n                        android:visibility=\"visible\"\r\n                        app:show_timeout=\"5000\"\r\n                        app:rewind_increment=\"10000\"\r\n                        app:fastforward_increment=\"10000\"\r\n                        app:use_controller=\"false\"\r\n                        app:surface_type=\"texture_view\"\r\n                        android:background=\"@drawable/square\"\r\n                        app:player_layout_id=\"@layout/exo_simple_player_view\"\r\n                        app:controller_layout_id=\"@layout/custom_controller\"/>\r\n\r\n                    <com.orion.orion.util.SquareImageView\r\n                        android:id=\"@+id/thumbnail\"\r\n                        android:visibility=\"visible\"\r\n                        android:src=\"@drawable/square\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        />\r\n\r\n                    <ImageView\r\n                        android:layout_width=\"60dp\"\r\n                        android:layout_height=\"60dp\"\r\n                        android:src=\"@drawable/ic_play_black_logo\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:id=\"@+id/play\"/>\r\n\r\n                    <ProgressBar\r\n                        android:layout_width=\"80dp\"\r\n                        android:layout_height=\"80dp\"\r\n                        android:visibility=\"gone\"\r\n                        android:id=\"@+id/progress_bar\"\r\n                        android:layout_gravity=\"center\"\r\n                        />\r\n                    <ImageView\r\n                        android:layout_width=\"25dp\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:src=\"@drawable/ic_unmute_black\"\r\n                        android:layout_gravity=\"bottom\"\r\n                        android:layout_margin=\"10dp\"\r\n                        android:visibility=\"gone\"\r\n\r\n                        android:id=\"@+id/unmute\"\r\n                        />\r\n                    <ImageView\r\n                        android:layout_width=\"25dp\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:layout_margin=\"10dp\"\r\n                        android:layout_gravity=\"bottom\"\r\n\r\n                        android:visibility=\"gone\"\r\n                        android:src=\"@drawable/ic_mute_black\"\r\n                        android:id=\"@+id/mute\"\r\n                        />\r\n                    <TextView\r\n                        android:layout_width=\"25dp\"\r\n                        android:layout_height=\"25dp\"\r\n                        android:background=\"@drawable/ic_white_circle\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"12\"\r\n                        android:visibility=\"gone\"\r\n                        android:textColor=\"#686868\"\r\n                        android:layout_gravity=\"right\"\r\n                        android:layout_margin='10dp'\r\n                        android:id=\"@+id/duration\"/>\r\n\r\n\r\n\r\n                    <com.orion.orion.util.SquareImageView\r\n                        android:id=\"@+id/post_image\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        />\r\n\r\n\r\n                </androidx.cardview.widget.CardView>\r\n\r\n            </RelativeLayout>\r\n            </RelativeLayout>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/credit\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                  android:layout_marginRight=\"20dp\"\r\n                    android:layout_gravity=\"end|bottom\"\r\n\r\n                    android:text=\"username\"\r\n\r\n                    android:textColor=\"@color/white\" />\r\n\r\n            </com.google.android.material.card.MaterialCardView>\r\n    <RelativeLayout\r\n                android:id=\"@+id/relLayout2\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/qwe\"\r\n        android:padding=\"15dp\"\r\n                android:background=\"@drawable/white_border\">\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/starlayout\"\r\n                    android:layout_width=\"60dp\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_centerHorizontal=\"true\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/image_star\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:src=\"@drawable/ic_star_black\"\r\n                        android:visibility=\"visible\" />\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/image_star_yellow\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:src=\"@drawable/ic_star_color\"\r\n                        android:visibility=\"invisible\" />\r\n\r\n\r\n                </RelativeLayout>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/comment_layout\"\r\n                    android:layout_width=\"60dp\"\r\n                    android:layout_height=\"match_parent\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/image_shoutout\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_centerVertical=\"true\"\r\n                        android:src=\"@drawable/ic_comment_black\"\r\n                        android:visibility=\"visible\" />\r\n                </RelativeLayout>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/promotion\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/promote\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_alignParentRight=\"true\"\r\n                        android:src=\"@drawable/ic_promote_black\" />\r\n\r\n                    <ImageView\r\n                        android:id=\"@+id/promoted\"\r\n                        android:layout_width=\"35dp\"\r\n                        android:layout_height=\"35dp\"\r\n                        android:layout_alignParentRight=\"true\"\r\n                        android:src=\"@drawable/ic_promote_yellow\"\r\n                        android:visibility=\"gone\" />\r\n                </RelativeLayout>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/comments_number\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/comment_layout\"\r\n                    android:layout_marginLeft=\"12dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:text=\"0\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/likes_number\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/starlayout\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginLeft=\"5dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:text=\"0\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/promote_number\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/promotion\"\r\n                    android:layout_alignParentRight=\"true\"\r\n\r\n                    android:layout_marginRight=\"5dp\"\r\n                    android:text=\"0\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"15dp\" />\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/relLayout3\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/relLayout2\"\r\n                android:layout_marginBottom=\"30dp\"\r\n                android:padding=\"10dp\">\r\n\r\n\r\n                <TextView\r\n                    android:id=\"@+id/image_caption\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:text=\"\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:textSize=\"16dp\" />\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n\r\n\r\n\r\n        </RelativeLayout>\r\n\r\n\r\n    </ScrollView>\r\n\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/layout_view_post.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout/layout_view_post.xml	(date 1605880669594)
@@ -95,7 +95,10 @@
                 <androidx.cardview.widget.CardView
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
+                    android:background="@color/white"
                     app:cardBackgroundColor="@color/white"
+                    android:outlineAmbientShadowColor="@color/white"
+
                     app:cardCornerRadius="10dp"
                    >
                     <com.orion.orion.util.SquareImageView
Index: app/src/main/java/com/orion/orion/util/FirebaseMethods.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.orion.orion.util;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Matrix;\r\nimport android.graphics.Paint;\r\nimport android.media.ExifInterface;\r\nimport android.net.Uri;\r\nimport android.os.Environment;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.FragmentActivity;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.google.gson.Gson;\r\nimport com.orion.orion.Notifications.Data;\r\nimport com.orion.orion.Notifications.Sender;\r\nimport com.orion.orion.Notifications.Token;\r\nimport com.orion.orion.R;\r\nimport com.orion.orion.contest.contestMainActivity;\r\nimport com.orion.orion.contest.create.CheckContest;\r\nimport com.orion.orion.contest.joined.JoiningForm;\r\nimport com.orion.orion.models.CreateForm;\r\nimport com.orion.orion.models.ParticipantList;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\nimport java.util.TimeZone;\r\n\r\npublic class FirebaseMethods {\r\n    private static final String TAG = \"FirebaseMethods\";\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseAuth.AuthStateListener mAuthListener;\r\n    private Context mContext;\r\n    private FirebaseDatabase mFirebaseDatabase;\r\n    private StorageReference mStorageReference;\r\n    private DatabaseReference myRef;\r\n    private String userID;\r\n    private double mPhotoUploadProgress = 0;\r\n    private RequestQueue requestQueue;\r\n    boolean flag1=true,flag2=true,flag3=true,flag4=true,flag5=true,flag6=true;\r\n    private static final float maxHeight = 1280.0f;\r\n    private static final float maxWidth = 1280.0f;\r\n\r\n    public FirebaseMethods(Context context) {\r\n        mContext = context;\r\n        mStorageReference = FirebaseStorage.getInstance().getReference();\r\n        mAuth = FirebaseAuth.getInstance();\r\n        mFirebaseDatabase = FirebaseDatabase.getInstance();\r\n        myRef = mFirebaseDatabase.getReference();\r\n        requestQueue = Volley.newRequestQueue(mContext);\r\n\r\n        if (mAuth.getCurrentUser() != null) {\r\n            userID = mAuth.getCurrentUser().getUid();\r\n            userID = mAuth.getCurrentUser().getUid();\r\n        }\r\n\r\n    }\r\n    public void uploadContest(final int count, final String imgURL, Bitmap bm, String contestKey, String p, String joiningkey){\r\n        FilePaths filepaths = new FilePaths();\r\n\r\n        if (!imgURL.equals(\"\")) {\r\n            String user_id = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\r\n            String newKey = FirebaseDatabase.getInstance().getReference().child(mContext.getString(R.string.dbname_contests)).push().getKey();\r\n\r\n            final StorageReference storageReference = mStorageReference\r\n                    .child(filepaths.FIREBASE_CONTEST_STORAGE + \"/\" + user_id + \"/\" + contestKey + \"/\" + newKey);\r\n\r\n            if (bm == null) {\r\n                bm = ImageManager.getBitmap(imgURL);\r\n            }\r\n\r\n\r\n            String imgUrl2= compressImage(imgURL);\r\n\r\n             bm = ImageManager.getBitmap(imgUrl2);\r\n\r\n\r\n            byte[] bytes;\r\n\r\n\r\n\r\n           bytes = ImageManager.getBytesFromBitmap(bm, 100);\r\n\r\n\r\n            UploadTask uploadTask = null;\r\n            uploadTask = storageReference.putBytes(bytes);\r\n\r\n            uploadTask.addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                    storageReference.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                        @Override\r\n                        public void onSuccess(Uri uri) {\r\n                            Uri firebaseurl = uri;\r\n                            CreateForm createForm = new CreateForm();\r\n//                           Toast.makeText(mContext, \"Photo Upload success\" , Toast.LENGTH_SHORT).show();\r\n                            DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n                            if (p.equals(\"p1\")) {\r\n                                flag1=false;\r\n                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.created_contest))\r\n                                        .child(contestKey)\r\n                                        .child(mContext.getString(R.string.field_jury_pic_1)).setValue(firebaseurl.toString()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        flag1=true;\r\n                                        if (flag1&&flag2&&flag3&&flag4){\r\n                                            ((CheckContest)mContext).progress.setVisibility(View.GONE);\r\n                                            ((CheckContest)mContext).  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                            Intent i = new Intent(mContext, contestMainActivity.class);\r\n                                            mContext. startActivity(i);\r\n                                            Toast.makeText(mContext ,\"Your Contest request has been submitted.\", Toast.LENGTH_SHORT).show();\r\n\r\n\r\n\r\n\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                            if (p.equals(\"p2\")) {\r\n\r\n                                flag2=false;\r\n                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.created_contest))\r\n                                        .child(contestKey)\r\n                                        .child(mContext.getString(R.string.field_jury_pic_2)).setValue(firebaseurl.toString()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        flag2=true;\r\n                                        if (flag1&&flag2&&flag3&&flag4){\r\n                                            ((CheckContest)mContext).progress.setVisibility(View.GONE);\r\n                                            ((CheckContest)mContext).  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                            Intent i = new Intent(mContext, contestMainActivity.class);\r\n                                            mContext. startActivity(i);\r\n                                            Toast.makeText(mContext ,\"Your Contest request has been submitted.\", Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                            if (p.equals(\"p3\")) {\r\n                                flag3=false;\r\n\r\n                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.created_contest))\r\n                                        .child(contestKey)\r\n                                        .child(mContext.getString(R.string.field_jury_pic_3)).setValue(firebaseurl.toString()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        flag3=true;\r\n                                        if (flag1&&flag2&&flag3&&flag4){\r\n                                            ((CheckContest)mContext).progress.setVisibility(View.GONE);\r\n                                            ((CheckContest)mContext).  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                            Intent i = new Intent(mContext, contestMainActivity.class);\r\n                                            mContext. startActivity(i);\r\n                                            Toast.makeText(mContext ,\"Your Contest request has been submitted.\", Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                            if (p.equals(\"p4\")) {\r\n                                flag4=false;\r\n\r\n                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.created_contest))\r\n                                        .child(contestKey)\r\n                                        .child(mContext.getString(R.string.field_poster)).setValue(firebaseurl.toString()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        flag4=true;\r\n                                        if (flag1&&flag2&&flag3&&flag4){\r\n                                            ((CheckContest)mContext).progress.setVisibility(View.GONE);\r\n                                            ((CheckContest)mContext).  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                            Intent i = new Intent(mContext, contestMainActivity.class);\r\n                                            mContext. startActivity(i);\r\n                                            Toast.makeText(mContext ,\"Your Contest request has been submitted.\", Toast.LENGTH_SHORT).show();\r\n\r\n\r\n\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                            if (p.equals(\"p5\")) {\r\n\r\n                                flag5=false;\r\n                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.joined_contest))\r\n                                        .child(joiningkey)\r\n                                        .child(mContext.getString(R.string.field_id_link)).setValue(firebaseurl.toString());\r\n                                ref.child(mContext.getString(R.string.dbname_request))\r\n                                        .child(mContext.getString(R.string.dbname_participantList))\r\n                                        .child(contestKey)\r\n                                        .child(joiningkey)\r\n                                        .child(mContext.getString(R.string.field_id_link)).setValue(firebaseurl.toString()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        flag5=true;\r\n                                        if (flag5&&flag6) {\r\n                                            ((JoiningForm) mContext).linearLayout.setVisibility(View.GONE);\r\n                                            ((JoiningForm) mContext).  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                            Intent i = new Intent(mContext, contestMainActivity.class);\r\n                                            mContext. startActivity(i);\r\n                                            Toast.makeText(mContext ,\"Your participation request has been submitted.\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                            if (p.equals(\"p6\")) {\r\n\r\n                                flag6=false;\r\n                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                        .child(mContext.getString(R.string.joined_contest))\r\n                                        .child(joiningkey)\r\n                                        .child(mContext.getString(R.string.field_media_link)).setValue(firebaseurl.toString());\r\n                                ref.child(mContext.getString(R.string.dbname_request))\r\n                                        .child(mContext.getString(R.string.dbname_participantList))\r\n                                        .child(contestKey)\r\n                                        .child(joiningkey)\r\n                                        .child(mContext.getString(R.string.field_media_link)).setValue(firebaseurl.toString()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        flag6=true;\r\n                                        if (flag5&&flag6) {\r\n                                            ((JoiningForm) mContext).linearLayout.setVisibility(View.GONE);\r\n                                            ((JoiningForm) mContext).  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);\r\n                                            Intent i = new Intent(mContext, contestMainActivity.class);\r\n                                            mContext. startActivity(i);\r\n                                            Toast.makeText(mContext ,\"Your participation request has been submitted.\", Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                                        }\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        }\r\n\r\n                    });\r\n\r\n//                   Intent intent = new Intent(mContext, MainActivity.class);\r\n//                   mContext.startActivity(intent);\r\n\r\n\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    Log.d(TAG, \"onFailure: Photo Upload Failed\");\r\n                    Toast.makeText(mContext, \"Pics Upload failed\", Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    public void sendNotification(final String hisUID, final String username,final String message,final String tittle) {\r\n        final  DatabaseReference allToken = FirebaseDatabase.getInstance().getReference(\"Tokens\");\r\n        Query query= allToken.orderByKey().equalTo(hisUID);\r\n        query.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                for (DataSnapshot ds : dataSnapshot.getChildren()) {\r\n                    Token token = ds.getValue(Token.class);\r\n                    Data data = new Data(FirebaseAuth.getInstance().getCurrentUser().getUid(), username + \" \" + message, tittle, hisUID, R.drawable.ic_home);\r\n                    Sender sender = new Sender(data, token.getToken());\r\n\r\n                    try {\r\n                        JSONObject senderJsonObj = new JSONObject(new Gson().toJson(sender));\r\n                        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(\"https://fcm.googleapis.com/fcm/send\", senderJsonObj,\r\n                                new Response.Listener<JSONObject>() {\r\n                                    @Override\r\n                                    public void onResponse(JSONObject response) {\r\n                                        Log.d(\"JSON_RESPONSE\", \"onResponse: \" + response.toString());\r\n                                    }\r\n\r\n                                }, new Response.ErrorListener() {\r\n                            @Override\r\n                            public void onErrorResponse(VolleyError error) {\r\n                                Log.d(\"JSON_RESPONSE\", \"onError: \" + error.toString());\r\n\r\n                            }\r\n                        }){\r\n                            @Override\r\n                            public Map<String, String> getHeaders() throws AuthFailureError {\r\n\r\n                                Map<String,String> headers = new HashMap<>();\r\n                                headers.put(\"Content-Type\",\"application/json\");\r\n                                headers.put(\"Authorization\",\"key=AAAAPBXWnHs:APA91bFkGt9VULR-c7XBIcsF0SYlKTiWod88zRpKwIBf-74w46zKCUuIqKIsATJ_Lbv56jdPWhJ0QclNp56kN8__I1mJOQcKJeGjg6CfrIkDYL9SmEy_Dz0zDhyF4WJIlMdE0khSk7qI\");\r\n\r\n                                return headers;\r\n                            }\r\n                        };\r\n\r\n\r\n                        requestQueue.add(jsonObjectRequest);\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n\r\n\r\n\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    public String getTim() {\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss'Z'\", Locale.ENGLISH);\r\n        sdf.setTimeZone(TimeZone.getTimeZone(\"Asia/Kolkata\"));\r\n        return sdf.format(new Date());\r\n    }\r\n\r\n\r\n    public String compressImage(String imagePath) {\r\n        Log.d(TAG, \"compressImage: \"+imagePath);\r\n  \r\n        File file = new File(imagePath);\r\n        if (file.exists() && file.canRead()) {\r\n            Log.d(TAG, \"compressImage: yes\");\r\n            Bitmap scaledBitmap = null;\r\n\r\n            BitmapFactory.Options options = new BitmapFactory.Options();\r\n            options.inJustDecodeBounds = true;\r\n            Bitmap bmp = BitmapFactory.decodeFile(imagePath, options);\r\n\r\n            int actualHeight = options.outHeight;\r\n            int actualWidth = options.outWidth;\r\n\r\n            float imgRatio = (float) actualWidth / (float) actualHeight;\r\n            float maxRatio = maxWidth / maxHeight;\r\n\r\n            if (actualHeight > maxHeight || actualWidth > maxWidth) {\r\n                if (imgRatio < maxRatio) {\r\n                    imgRatio = maxHeight / actualHeight;\r\n                    actualWidth = (int) (imgRatio * actualWidth);\r\n                    actualHeight = (int) maxHeight;\r\n                } else if (imgRatio > maxRatio) {\r\n                    imgRatio = maxWidth / actualWidth;\r\n                    actualHeight = (int) (imgRatio * actualHeight);\r\n                    actualWidth = (int) maxWidth;\r\n                } else {\r\n                    actualHeight = (int) maxHeight;\r\n                    actualWidth = (int) maxWidth;\r\n\r\n                }\r\n            }\r\n\r\n            options.inSampleSize = calculateInSampleSize(options, actualWidth, actualHeight);\r\n            options.inJustDecodeBounds = false;\r\n            options.inDither = false;\r\n            options.inPurgeable = true;\r\n            options.inInputShareable = true;\r\n            options.inTempStorage = new byte[16 * 1024];\r\n\r\n            try {\r\n                bmp = BitmapFactory.decodeFile(imagePath, options);\r\n            } catch (OutOfMemoryError exception) {\r\n                exception.printStackTrace();\r\n\r\n            }\r\n            try {\r\n                scaledBitmap = Bitmap.createBitmap(actualWidth, actualHeight, Bitmap.Config.RGB_565);\r\n            } catch (OutOfMemoryError exception) {\r\n                exception.printStackTrace();\r\n            }\r\n\r\n            float ratioX = actualWidth / (float) options.outWidth;\r\n            float ratioY = actualHeight / (float) options.outHeight;\r\n            float middleX = actualWidth / 2.0f;\r\n            float middleY = actualHeight / 2.0f;\r\n\r\n            Matrix scaleMatrix = new Matrix();\r\n            scaleMatrix.setScale(ratioX, ratioY, middleX, middleY);\r\n\r\n            Canvas canvas = new Canvas(scaledBitmap);\r\n            canvas.setMatrix(scaleMatrix);\r\n            canvas.drawBitmap(bmp, middleX - bmp.getWidth() / 2, middleY - bmp.getHeight() / 2, new Paint(Paint.FILTER_BITMAP_FLAG));\r\n\r\n            if (bmp != null) {\r\n                bmp.recycle();\r\n            }\r\n\r\n            ExifInterface exif;\r\n            try {\r\n                exif = new ExifInterface(imagePath);\r\n                int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 0);\r\n                Matrix matrix = new Matrix();\r\n                if (orientation == 6) {\r\n                    matrix.postRotate(90);\r\n                } else if (orientation == 3) {\r\n                    matrix.postRotate(180);\r\n                } else if (orientation == 8) {\r\n                    matrix.postRotate(270);\r\n                }\r\n                scaledBitmap = Bitmap.createBitmap(scaledBitmap, 0, 0, scaledBitmap.getWidth(), scaledBitmap.getHeight(), matrix, true);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            FileOutputStream out = null;\r\n            String filepath = getFilename();\r\n            try {\r\n                out = new FileOutputStream(filepath);\r\n\r\n                //write the compressed bitmap at the destination specified by filename.\r\n                scaledBitmap.compress(Bitmap.CompressFormat.JPEG, 80, out);\r\n\r\n            } catch (FileNotFoundException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            return filepath;\r\n\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {\r\n        final int height = options.outHeight;\r\n        final int width = options.outWidth;\r\n        int inSampleSize = 1;\r\n\r\n        if (height > reqHeight || width > reqWidth) {\r\n            final int heightRatio = Math.round((float) height / (float) reqHeight);\r\n            final int widthRatio = Math.round((float) width / (float) reqWidth);\r\n            inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;\r\n        }\r\n        final float totalPixels = width * height;\r\n        final float totalReqPixelsCap = reqWidth * reqHeight * 2;\r\n\r\n        while (totalPixels / (inSampleSize * inSampleSize) > totalReqPixelsCap) {\r\n            inSampleSize++;\r\n        }\r\n\r\n        return inSampleSize;\r\n    }\r\n\r\n    public String getFilename() {\r\n            File mediaStorageDir = new File(Environment.getExternalStorageDirectory()\r\n                    + \"/Android/data/\"\r\n                    + mContext.getApplicationContext().getPackageName()\r\n                    + \"/Files/Compressed\");\r\n\r\n            // Create the storage directory if it does not exist\r\n            if (!mediaStorageDir.exists()) {\r\n                mediaStorageDir.mkdirs();\r\n            }\r\n\r\n            String mImageName = \"IMG_\" + String.valueOf(System.currentTimeMillis()) + \".jpg\";\r\n            String uriString = (mediaStorageDir.getAbsolutePath() + \"/\" + mImageName);\r\n            ;\r\n            return uriString;\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    public void publishResut(boolean manual, String Conteskey, ArrayList<ParticipantList> participantLists,\r\n                             LinearLayout progress, FragmentActivity activity, ArrayList<ParticipantList> winnerList) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n\r\n        if (manual) {\r\n\r\n            ref.child(mContext.getString(R.string.dbname_contestlist))\r\n                    .child(Conteskey)\r\n                    .child(mContext.getString(R.string.field_result))\r\n                    .setValue(true)\r\n                    .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            ref.child(mContext.getString(R.string.dbname_contests))\r\n                                    .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                    .child(mContext.getString(R.string.field_contest_completed))\r\n                                    .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                            if (snapshot.exists()) {\r\n                                                long x = (long) snapshot.getValue();\r\n                                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                                        .child(mContext.getString(R.string.field_contest_completed))\r\n                                                        .setValue(x + 1)\r\n                                                        .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                            @Override\r\n                                                            public void onSuccess(Void aVoid) {\r\n                                                               publishResutFurther(manual, Conteskey,participantLists,\r\n                                                                   progress,activity,  winnerList);\r\n                                                            }\r\n                                                        });\r\n                                            } else {\r\n                                                ref.child(mContext.getString(R.string.dbname_contests))\r\n                                                        .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                                                        .child(mContext.getString(R.string.field_contest_completed))\r\n                                                        .setValue(1).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                                    @Override\r\n                                                    public void onSuccess(Void aVoid) {\r\n                                                       publishResutFurther(manual, Conteskey, participantLists, progress, activity, winnerList);\r\n                                                    }\r\n                                                });\r\n                                            }\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                        }\r\n                                    });\r\n                        }\r\n                    });\r\n\r\n\r\n        }else{\r\n            ref.child(mContext.getString(R.string.dbname_contestlist))\r\n                    .child(Conteskey)\r\n                    .child(mContext.getString(R.string.field_result))\r\n                    .setValue(true)\r\n                    .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            publishResutFurther(manual, Conteskey, participantLists, progress, activity, winnerList);\r\n                        }\r\n                    });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public void publishResutFurther(boolean manual, String Conteskey, ArrayList<ParticipantList> participantLists, LinearLayout progress, FragmentActivity activity, ArrayList<ParticipantList> winnerList) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n\r\n        ref.child(mContext.getString(R.string.dbname_contests))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                .child(mContext.getString(R.string.created_contest))\r\n                .child(Conteskey)\r\n                .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        if (!snapshot.child(mContext.getString(R.string.field_jury_name_1)).getValue().toString().equals(\"\")){\r\n                            ref.child(mContext.getString(R.string.dbname_username))\r\n                                    .child(snapshot.child(mContext.getString(R.string.field_jury_name_1)).getValue().toString())\r\n                                    .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                            if (snapshot.exists()){\r\n                                                DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(mContext.getString(R.string.dbname_contests))\r\n                                                        .child(snapshot.getValue().toString())\r\n                                                        .child(mContext.getString(R.string.field_contest_judged));\r\n\r\n                                                ref2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                                    @Override\r\n                                                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                                        if (snapshot.exists()) {\r\n                                                            long l = (long) snapshot.getValue();\r\n                                                            ref2.setValue(l+1);\r\n                                                        }else{\r\n                                                            ref2.setValue(1);\r\n                                                        }\r\n\r\n                                                    }\r\n\r\n                                                    @Override\r\n                                                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                                    }\r\n                                                });\r\n\r\n                                            }\r\n\r\n\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                        }\r\n                                    });\r\n                        }\r\n                        if (!snapshot.child(mContext.getString(R.string.field_jury_name_2)).getValue().toString().equals(\"\")){\r\n                            ref.child(mContext.getString(R.string.dbname_username))\r\n                                    .child(snapshot.child(mContext.getString(R.string.field_jury_name_2)).getValue().toString())\r\n                                    .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                            if (snapshot.exists()){\r\n                                                DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(mContext.getString(R.string.dbname_contests))\r\n                                                        .child(snapshot.getValue().toString())\r\n                                                        .child(mContext.getString(R.string.field_contest_judged));\r\n\r\n                                                ref2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                                    @Override\r\n                                                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                                        if (snapshot.exists()) {\r\n                                                            long l = (long) snapshot.getValue();\r\n                                                            ref2.setValue(l+1);\r\n                                                        }else{\r\n                                                            ref2.setValue(1);\r\n                                                        }\r\n\r\n                                                    }\r\n\r\n                                                    @Override\r\n                                                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                                    }\r\n                                                });\r\n\r\n                                            }\r\n\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                        }\r\n                                    });\r\n                        }\r\n                        if (!snapshot.child(mContext.getString(R.string.field_jury_name_3)).getValue().toString().equals(\"\")){\r\n                            ref.child(mContext.getString(R.string.dbname_username))\r\n                                    .child(snapshot.child(mContext.getString(R.string.field_jury_name_3)).getValue().toString())\r\n                                    .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                            if (snapshot.exists()){\r\n                                                DatabaseReference ref2 = FirebaseDatabase.getInstance().getReference(mContext.getString(R.string.dbname_contests))\r\n                                                        .child(snapshot.getValue().toString())\r\n                                                        .child(mContext.getString(R.string.field_contest_judged));\r\n\r\n                                                ref2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                                    @Override\r\n                                                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                                        if (snapshot.exists()) {\r\n                                                            long l = (long) snapshot.getValue();\r\n                                                            ref2.setValue(l+1);\r\n                                                        }else{\r\n                                                            ref2.setValue(1);\r\n                                                        }\r\n\r\n                                                    }\r\n\r\n                                                    @Override\r\n                                                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                                    }\r\n                                                });\r\n\r\n                                            }\r\n\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                        }\r\n                                    });\r\n                        }\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n\r\n        if (winnerList.size() != 0) {\r\n\r\n            for (int x = 0; x < winnerList.size(); x++) {\r\n                DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference(mContext.getString(R.string.dbname_contests))\r\n                        .child(winnerList.get(x).getUi())\r\n                        .child(mContext.getString(R.string.field_contest_wins));\r\n\r\n                int finalX = x;\r\n                int finalX1 = x;\r\n                ref3.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot1) {\r\n                        if (snapshot1.exists()){\r\n                            long l= (long)snapshot1.getValue();\r\n                            ref3.setValue(l+1);\r\n                        }else{\r\n                            ref3.setValue(1);\r\n\r\n                        }\r\n                        if (finalX1 ==winnerList.size()){\r\n                            sendNotyToParticipants(participantLists,progress);\r\n\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n\r\n            }\r\n            if (winnerList.size()==0){\r\n                sendNotyToParticipants(participantLists, progress);\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void sendNotyToParticipants(ArrayList<ParticipantList> participantLists, LinearLayout progress) {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference();\r\n\r\n        if (participantLists.size() != 0) {\r\n            for (int x = 0; x < participantLists.size(); x++) {\r\n\r\n                sendNotification(participantLists.get(x).getUi(), \"\", \"Result has been declared of a contest.Check your ranking now.\", \"Result Declared\");\r\n\r\n\r\n                addToHisNotification(\"\" + participantLists.get(x).getUi(), \"Result has been declared of a contest.Check your ranking now.\");\r\n\r\n                int finalX = x;\r\n                ref.child(mContext.getString(R.string.dbname_contests))\r\n                        .child(participantLists.get(finalX).getUi())\r\n                        .child(mContext.getString(R.string.field_contest_participated))\r\n                        .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                if (snapshot.exists()) {\r\n                                    long l= (long) snapshot.getValue();\r\n                                    ref.child(mContext.getString(R.string.dbname_contests))\r\n                                            .child(participantLists.get(finalX).getUi())\r\n                                            .child(mContext.getString(R.string.field_contest_participated))\r\n                                            .setValue(l+ 1);\r\n                                    if (finalX==participantLists.size()-1){\r\n\r\n                                        progress.setVisibility(View.GONE);\r\n                                    }\r\n                                } else {\r\n                                    ref.child(mContext.getString(R.string.dbname_contests))\r\n                                            .child(participantLists.get(finalX).getUi())\r\n                                            .child(mContext.getString(R.string.field_contest_participated))\r\n                                            .setValue(1);\r\n                                    if (finalX==participantLists.size()-1){\r\n                                        progress.setVisibility(View.GONE);\r\n\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                            }\r\n                        });\r\n\r\n\r\n            }\r\n        }else {\r\n            progress.setVisibility(View.GONE);\r\n\r\n        }\r\n    }\r\n\r\n\r\n    private void addToHisNotification(String hisUid, String notification) {\r\n\r\n        SNTPClient.getDate(TimeZone.getTimeZone(\"Asia/Colombo\"), new SNTPClient.Listener() {\r\n            @Override\r\n            public void onTimeReceived(String rawDate) {\r\n                // rawDate -> 2019-11-05T17:51:01+0530\r\n\r\n                String str_date = rawDate;\r\n                java.text.DateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ssZ\");\r\n                Date date = null;\r\n                try {\r\n                    date = (Date) formatter.parse(str_date);\r\n                } catch (ParseException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                Log.d(TAG, \"onCreateView: timestampyesss\" + date.getTime());\r\n                String timestamp = String.valueOf(date.getTime());\r\n\r\n\r\n\r\n//        data to put in notification\r\n                HashMap<Object,String> hashMap = new HashMap<>();\r\n                hashMap.put(\"pId\",\"false\");\r\n\r\n                hashMap.put(mContext.getString(R.string.field_timestamp),timestamp);\r\n\r\n                hashMap.put(\"pUid\",hisUid);\r\n\r\n                hashMap.put(mContext.getString(R.string.field_notification_message),notification);\r\n                hashMap.put(mContext.getString(R.string.field_if_seen),\"false\");\r\n\r\n                hashMap.put(\"sUid\",FirebaseAuth.getInstance().getCurrentUser().getUid());\r\n\r\n                DatabaseReference ref = FirebaseDatabase.getInstance().getReference(mContext.getString(R.string.dbname_users));\r\n                ref.child(hisUid).child(mContext.getString(R.string.field_Notifications)).child(timestamp).setValue(hashMap)\r\n                        .addOnSuccessListener(aVoid -> {\r\n\r\n                        }).addOnFailureListener(e -> {\r\n\r\n                });\r\n                Log.e(SNTPClient.TAG, rawDate);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(Exception ex) {\r\n                Log.e(SNTPClient.TAG, ex.getMessage());\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n    public int getImageCount(DataSnapshot dataSnapshot) {\r\n\r\n        int count = 0;\r\n        for (DataSnapshot ds : dataSnapshot\r\n                .child(mContext.getString(R.string.dbname_user_photos))\r\n                .child(FirebaseAuth.getInstance().getCurrentUser().getUid())\r\n                .getChildren()) {\r\n            count++;\r\n        }\r\n        return count;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/orion/orion/util/FirebaseMethods.java	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/java/com/orion/orion/util/FirebaseMethods.java	(date 1605882374648)
@@ -617,6 +617,7 @@
                                                         if (snapshot.exists()) {
                                                             long l = (long) snapshot.getValue();
                                                             ref2.setValue(l+1);
+                                                            Log.d(TAG, "onDataChange: cgy 1");
                                                         }else{
                                                             ref2.setValue(1);
                                                         }
@@ -726,8 +727,11 @@
 
                     }
                 });
+        Log.d(TAG, "onDataChange: cgy 3"+winnerList+" "+participantLists);
 
         if (winnerList.size() != 0) {
+            Log.d(TAG, "onDataChange: cgy 2");
+
 
             for (int x = 0; x < winnerList.size(); x++) {
                 DatabaseReference ref3 = FirebaseDatabase.getInstance().getReference(mContext.getString(R.string.dbname_contests))
@@ -741,15 +745,30 @@
                     public void onDataChange(@NonNull DataSnapshot snapshot1) {
                         if (snapshot1.exists()){
                             long l= (long)snapshot1.getValue();
-                            ref3.setValue(l+1);
+                            ref3.setValue(l+1)
+                                    .addOnSuccessListener(new OnSuccessListener<Void>() {
+                                        @Override
+                                        public void onSuccess(Void aVoid) {
+                                            if (finalX1 ==winnerList.size()){
+                                                sendNotyToParticipants(participantLists,progress);
+
+                                            }
+                                        }
+                                    });
                         }else{
-                            ref3.setValue(1);
-
-                        }
-                        if (finalX1 ==winnerList.size()){
-                            sendNotyToParticipants(participantLists,progress);
+                            ref3.setValue(1)
+                                    .addOnSuccessListener(new OnSuccessListener<Void>() {
+                                        @Override
+                                        public void onSuccess(Void aVoid) {
+                                            if (finalX1 ==winnerList.size()){
+                                                sendNotyToParticipants(participantLists,progress);
 
+                                            }
+                                        }
+;                                    });
+
                         }
+
                     }
 
 
@@ -773,8 +792,11 @@
 
     private void sendNotyToParticipants(ArrayList<ParticipantList> participantLists, LinearLayout progress) {
         DatabaseReference ref = FirebaseDatabase.getInstance().getReference();
+        Log.d(TAG, "onDataChange: cgy 5");
 
         if (participantLists.size() != 0) {
+            Log.d(TAG, "onDataChange: cgy 4");
+
             for (int x = 0; x < participantLists.size(); x++) {
 
                 sendNotification(participantLists.get(x).getUi(), "", "Result has been declared of a contest.Check your ranking now.", "Result Declared");
@@ -796,6 +818,7 @@
                                             .child(mContext.getString(R.string.field_contest_participated))
                                             .setValue(l+ 1);
                                     if (finalX==participantLists.size()-1){
+                                        Log.d(TAG, "onDataChange: cgy 7");
 
                                         progress.setVisibility(View.GONE);
                                     }
@@ -805,6 +828,8 @@
                                             .child(mContext.getString(R.string.field_contest_participated))
                                             .setValue(1);
                                     if (finalX==participantLists.size()-1){
+                                        Log.d(TAG, "onDataChange: cgy 8");
+
                                         progress.setVisibility(View.GONE);
 
                                     }
@@ -820,6 +845,8 @@
 
             }
         }else {
+            Log.d(TAG, "onDataChange: cgy 6");
+
             progress.setVisibility(View.GONE);
 
         }
Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#Sun Nov 15 19:02:25 IST 2020\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.5-bin.zip\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
--- gradle/wrapper/gradle-wrapper.properties	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ gradle/wrapper/gradle-wrapper.properties	(date 1605718346268)
@@ -1,6 +1,6 @@
-#Sun Nov 15 19:02:25 IST 2020
+#Wed Nov 18 18:50:53 IST 2020
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-6.5-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-6.5-all.zip
Index: app/src/main/java/com/orion/orion/profile/Account/EditProfile.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.orion.orion.profile.Account;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.annotation.TargetApi;\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.ContentUris;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.content.pm.PackageManager;\r\nimport android.database.Cursor;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.provider.DocumentsContract;\r\nimport android.provider.MediaStore;\r\nimport android.text.InputType;\r\nimport android.text.TextUtils;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.orion.orion.R;\r\nimport com.orion.orion.login.login;\r\nimport com.orion.orion.models.users;\r\nimport com.orion.orion.profile.PostPhotoActivity;\r\nimport com.orion.orion.profile.ProfileActivity;\r\nimport com.orion.orion.util.FilePaths;\r\nimport com.orion.orion.util.FirebaseMethods;\r\nimport com.orion.orion.util.ImageManager;\r\nimport com.orion.orion.util.Permissions;\r\n\r\nimport java.io.File;\r\nimport java.util.Collections;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\nimport java.util.regex.Pattern;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\npublic class EditProfile extends AppCompatActivity {\r\n    private static final String TAG = \"EditProfile\";\r\n    private static final int VERIFY_PERMISSION_REQUEST = 1;\r\n\r\n    private DatabaseReference myRef;\r\n    private FirebaseAuth mAuth;\r\n    private String userID;\r\n    private Context mContext;\r\n    private FirebaseAuth.AuthStateListener mAuthListener;\r\n    private FirebaseMethods mFirebaseMethods;\r\n\r\n    private ImageView backarrow;\r\n    private ImageView checkmark;\r\n    private ImageView mProfilephoto;\r\n    private TextView mchangeprofilephoto;\r\n\r\n    private String imgURL;\r\n    private boolean photoChanged = false;\r\n\r\n    private EditText mDisplayname;\r\n    private EditText mUsername;\r\n    private EditText mdescription;\r\n    private EditText mExternalLinks;\r\n    private ImageView mAddLink;\r\n    private RelativeLayout link1Container;\r\n    private RelativeLayout link2Container;\r\n    private RelativeLayout link3Container;\r\n    private TextView mLink1;\r\n    private ImageView mLink1delete;\r\n    private TextView mLink2;\r\n    private ImageView mLink2delete;\r\n    private TextView mLink3;\r\n    private ImageView mLink3delete;\r\n\r\n    private LinearLayout mGmailLink;\r\n    private LinearLayout mInstagramLink;\r\n    private LinearLayout mFacebookLink;\r\n    private LinearLayout mTwitterLink;\r\n    private LinearLayout mWhatsappLink;\r\n\r\n    private String gmail;\r\n    private String instagramProfile;\r\n    private String facebookProfile;\r\n    private String twitterProfile;\r\n    private String whatsappNo;\r\n    private String externalLink1;\r\n    private String externalLink2;\r\n    private String externalLink3;\r\n\r\n    //dialogBoxStuff\r\n    private AlertDialog dialogBuilder;\r\n    private View dialogView;\r\n    private TextView title;\r\n    private EditText editComment;\r\n    private Button buttonSubmit;\r\n    private Button buttonCancel;\r\n\r\n    private users setting;\r\n\r\n\r\n    @SuppressLint(\"InflateParams\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_editprofile);\r\n        mContext = EditProfile.this;\r\n\r\n        mFirebaseMethods=new FirebaseMethods(mContext);\r\n\r\n        backarrow = findViewById(R.id.backarrow);\r\n        checkmark = findViewById(R.id.saveChanges);\r\n\r\n        mProfilephoto = findViewById(R.id.profile_photo);\r\n        mchangeprofilephoto = findViewById(R.id.change_Profile_Photo);\r\n\r\n        mDisplayname = findViewById(R.id.display_name);\r\n        mdescription = findViewById(R.id.description);\r\n        mUsername = findViewById(R.id.username);\r\n        mExternalLinks = findViewById(R.id.externalLinks);\r\n        mAddLink = findViewById(R.id.addLink);\r\n        link1Container = findViewById(R.id.relLayout5);\r\n        link2Container = findViewById(R.id.relLayout6);\r\n        link3Container = findViewById(R.id.relLayout7);\r\n        mLink1 = findViewById(R.id.link1);\r\n        mLink1delete = findViewById(R.id.link1delete);\r\n        mLink2 = findViewById(R.id.link2);\r\n        mLink2delete = findViewById(R.id.link2delete);\r\n        mLink3 = findViewById(R.id.link3);\r\n        mLink3delete = findViewById(R.id.link3delete);\r\n\r\n        mGmailLink = findViewById(R.id.gmail_link);\r\n        mInstagramLink = findViewById(R.id.instagram_link);\r\n        mFacebookLink = findViewById(R.id.facebook_link);\r\n        mTwitterLink = findViewById(R.id.twitter_link);\r\n        mWhatsappLink = findViewById(R.id.whatsapp_link);\r\n\r\n\r\n        gmail = \"\";\r\n        instagramProfile = \"\";\r\n        facebookProfile = \"\";\r\n        twitterProfile = \"\";\r\n        whatsappNo = \"\";\r\n        externalLink1 = \"\";\r\n        externalLink2 = \"\";\r\n        externalLink3 = \"\";\r\n\r\n        dialogBuilder = new AlertDialog.Builder(this).create();\r\n        LayoutInflater inflater = this.getLayoutInflater();\r\n        dialogView = inflater.inflate(R.layout.dialog_profile_link, null);\r\n\r\n        title = dialogView.findViewById(R.id.textView);\r\n        editComment = dialogView.findViewById(R.id.edt_comment);\r\n        buttonSubmit = dialogView.findViewById(R.id.buttonSubmit);\r\n        buttonCancel = dialogView.findViewById(R.id.buttonCancel);\r\n\r\n//        FirebaseMethods mFirebaseMethods = new FirebaseMethods(this);\r\n\r\n\r\n        setupFirebaseAuth();\r\n        initOnClicks();\r\n    }\r\n\r\n    private void initOnClicks() {\r\n        mchangeprofilephoto.setOnClickListener(v -> {\r\n            if (checkPermissionArray(Permissions.PERMISSIONS)) {\r\n                Intent intent = new Intent();\r\n                intent.setType(\"image/*\");\r\n                intent.setAction(Intent.ACTION_GET_CONTENT);\r\n                startActivityForResult(Intent.createChooser(intent, \"Select Picture\"), 1);\r\n            } else verifyPermission(Permissions.PERMISSIONS);\r\n\r\n        });\r\n        mGmailLink.setOnClickListener(v -> {\r\n            title.setText(\"Add/Edit your email address\");\r\n            editComment.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);\r\n            if (gmail != null || !gmail.equals(\"\")) {\r\n                buttonSubmit.setText(\"EDIT\");\r\n                editComment.setText(gmail);\r\n            } else editComment.setHint(\"Enter email address to add\");\r\n            buttonSubmit.setOnClickListener(view -> {\r\n                String text = String.valueOf(editComment.getText());\r\n                gmail = text;\r\n                if (text.equals(\"\")) editComment.setError(\"Cant be empty\");\r\n                else {\r\n                    mGmailLink.setAlpha(1.0f);\r\n                    dialogBuilder.dismiss();\r\n                }\r\n            });\r\n            buttonCancel.setOnClickListener(view -> dialogBuilder.dismiss());\r\n            dialogBuilder.setView(dialogView);\r\n            dialogBuilder.show();\r\n        });\r\n        mInstagramLink.setOnClickListener(v -> {\r\n            title.setText(\"Add/Edit your Instagram username\");\r\n            editComment.setInputType(InputType.TYPE_CLASS_TEXT);\r\n            if (instagramProfile != null || !instagramProfile.equals(\"\")) {\r\n                buttonSubmit.setText(\"EDIT\");\r\n                editComment.setText(instagramProfile);\r\n            } else {\r\n                editComment.setText(instagramProfile);\r\n                editComment.setHint(\"Enter profile link to add\");\r\n            }\r\n            buttonSubmit.setOnClickListener(view -> {\r\n                String text = String.valueOf(editComment.getText());\r\n                instagramProfile = text;\r\n                if (text.equals(\"\")) editComment.setError(\"Cant be empty\");\r\n                else {\r\n                    mInstagramLink.setAlpha(1.0f);\r\n                    dialogBuilder.dismiss();\r\n                }\r\n            });\r\n            buttonCancel.setOnClickListener(view -> dialogBuilder.dismiss());\r\n            dialogBuilder.setView(dialogView);\r\n            dialogBuilder.show();\r\n        });\r\n        mFacebookLink.setOnClickListener(v -> {\r\n            title.setText(\"Add/Edit your Facebook unique id\");\r\n            editComment.setInputType(InputType.TYPE_CLASS_TEXT);\r\n            if (facebookProfile != null || !facebookProfile.equals(\"\")) {\r\n                buttonSubmit.setText(\"EDIT\");\r\n                editComment.setText(facebookProfile);\r\n            } else {\r\n                editComment.setText(facebookProfile);\r\n                editComment.setHint(\"Enter profile link to add\");\r\n            }\r\n            buttonSubmit.setOnClickListener(view -> {\r\n                String text = String.valueOf(editComment.getText());\r\n                facebookProfile = text;\r\n                if (text.equals(\"\")) editComment.setError(\"Cant be empty\");\r\n                else {\r\n                    mFacebookLink.setAlpha(1.0f);\r\n                    dialogBuilder.dismiss();\r\n                }\r\n            });\r\n            buttonCancel.setOnClickListener(view -> dialogBuilder.dismiss());\r\n            dialogBuilder.setView(dialogView);\r\n            dialogBuilder.show();\r\n        });\r\n        mTwitterLink.setOnClickListener(v -> {\r\n            title.setText(\"Add/Edit your Twitter id\");\r\n            editComment.setInputType(InputType.TYPE_CLASS_TEXT);\r\n            if (twitterProfile != null || !twitterProfile.equals(\"\")) {\r\n                buttonSubmit.setText(\"EDIT\");\r\n                editComment.setText(twitterProfile);\r\n            } else {\r\n                editComment.setText(twitterProfile);\r\n                editComment.setHint(\"Enter profile link to add\");\r\n            }\r\n            buttonSubmit.setOnClickListener(view -> {\r\n                String text = String.valueOf(editComment.getText());\r\n                twitterProfile = text;\r\n                if (text.equals(\"\")) editComment.setError(\"Cant be empty\");\r\n                else {\r\n                    mTwitterLink.setAlpha(1.0f);\r\n                    dialogBuilder.dismiss();\r\n                }\r\n            });\r\n            buttonCancel.setOnClickListener(view -> dialogBuilder.dismiss());\r\n            dialogBuilder.setView(dialogView);\r\n            dialogBuilder.show();\r\n        });\r\n        mWhatsappLink.setOnClickListener(v -> {\r\n            title.setText(\"Add/Edit your Whats app no\");\r\n            editComment.setInputType(InputType.TYPE_CLASS_PHONE);\r\n            if (whatsappNo != null || !whatsappNo.equals(\"\")) {\r\n                buttonSubmit.setText(\"EDIT\");\r\n                editComment.setText(whatsappNo);\r\n            } else {\r\n                editComment.setText(whatsappNo);\r\n                editComment.setHint(\"Enter contact no. to add\");\r\n            }\r\n            buttonSubmit.setOnClickListener(view -> {\r\n                String text = String.valueOf(editComment.getText());\r\n                whatsappNo = text;\r\n                if (text.equals(\"\")) editComment.setError(\"Cant be empty\");\r\n                else {\r\n                    mWhatsappLink.setAlpha(1.0f);\r\n                    dialogBuilder.dismiss();\r\n                }\r\n            });\r\n            buttonCancel.setOnClickListener(view -> dialogBuilder.dismiss());\r\n            dialogBuilder.setView(dialogView);\r\n            dialogBuilder.show();\r\n        });\r\n        mAddLink.setOnClickListener(v -> {\r\n            String link = String.valueOf(mExternalLinks.getText());\r\n            if (!link.equals(\"\")) {\r\n                if (link1Container.getVisibility() == View.VISIBLE && link2Container.getVisibility() == View.VISIBLE && link3Container.getVisibility() == View.VISIBLE) {\r\n                    Toast.makeText(mContext, \"You can add at the most 3 links\", Toast.LENGTH_LONG).show();\r\n                } else if (link1Container.getVisibility() == View.VISIBLE && link2Container.getVisibility() == View.VISIBLE && link3Container.getVisibility() != View.VISIBLE) {\r\n                    link3Container.setVisibility(View.VISIBLE);\r\n                    mLink3.setText(link);\r\n                    externalLink3 = link;\r\n                    mExternalLinks.setText(\"\");\r\n                } else if (link1Container.getVisibility() == View.VISIBLE && link2Container.getVisibility() != View.VISIBLE && link3Container.getVisibility() != View.VISIBLE) {\r\n                    link2Container.setVisibility(View.VISIBLE);\r\n                    mLink2.setText(link);\r\n                    externalLink2 = link;\r\n                    mExternalLinks.setText(\"\");\r\n                } else {\r\n                    link1Container.setVisibility(View.VISIBLE);\r\n                    mLink1.setText(link);\r\n                    externalLink1 = link;\r\n                    mExternalLinks.setText(\"\");\r\n                }\r\n            }\r\n        });\r\n        mLink1delete.setOnClickListener(v -> {\r\n            if (link1Container.getVisibility() == View.VISIBLE && link2Container.getVisibility() == View.VISIBLE) {\r\n                mLink1.setText(mLink2.getText());\r\n                mLink2.setText(mLink3.getText());\r\n                externalLink1 = externalLink2;\r\n                externalLink2 = externalLink3;\r\n                externalLink3 = \"\";\r\n                mLink3.setText(\"\");\r\n                link3Container.setVisibility(View.GONE);\r\n            } else if (link2Container.getVisibility() == View.VISIBLE && link3Container.getVisibility() != View.VISIBLE) {\r\n                mLink1.setText(mLink2.getText());\r\n                externalLink1 = externalLink2;\r\n                externalLink2 = \"\";\r\n                mLink2.setText(\"\");\r\n                link2Container.setVisibility(View.GONE);\r\n            } else if (link2Container.getVisibility() != View.VISIBLE && link3Container.getVisibility() == View.VISIBLE) {\r\n\r\n            } else {\r\n                externalLink1 = \"\";\r\n                mLink1.setText(\"\");\r\n                link1Container.setVisibility(View.GONE);\r\n            }\r\n        });\r\n        mLink2delete.setOnClickListener(v -> {\r\n            if (link3Container.getVisibility() == View.VISIBLE) {\r\n                mLink2.setText(mLink3.getText());\r\n                externalLink2 = externalLink3;\r\n                externalLink3 = \"\";\r\n                mLink3.setText(\"\");\r\n                link3Container.setVisibility(View.GONE);\r\n            } else {\r\n                externalLink1 = \"\";\r\n                mLink2.setText(\"\");\r\n                link2Container.setVisibility(View.GONE);\r\n            }\r\n        });\r\n        mLink3delete.setOnClickListener(v -> {\r\n            externalLink3 = \"\";\r\n            mLink3.setText(\"\");\r\n            link3Container.setVisibility(View.GONE);\r\n        });\r\n        backarrow.setOnClickListener(v -> {\r\n            androidx.appcompat.app.AlertDialog.Builder builder = new androidx.appcompat.app.AlertDialog.Builder(this);\r\n            builder.setTitle(\"Are you sure\")\r\n                    .setMessage(\"You will discard all the changes you made?\")\r\n                    .setCancelable(false)\r\n                    .setPositiveButton(\"Yes\", (dialog, id) -> finish())\r\n                    .setNegativeButton(\"No\", (dialog, id) -> dialog.cancel())\r\n                    .show();\r\n        });\r\n        checkmark.setOnClickListener(v -> {\r\n            androidx.appcompat.app.AlertDialog.Builder builder = new androidx.appcompat.app.AlertDialog.Builder(this);\r\n            builder.setTitle(\"Are you sure\")\r\n                    .setMessage(\"Would you not like to check changes once again?\")\r\n                    .setCancelable(false)\r\n                    .setPositiveButton(\"Yes\", (dialog, id) -> dialog.cancel())\r\n                    .setNegativeButton(\"No\", (dialog, id) -> saveProfileSetting())\r\n                    .show();\r\n        });\r\n    }\r\n\r\n    public void verifyPermission(String[] permissions) {\r\n        ActivityCompat.requestPermissions(this, permissions, VERIFY_PERMISSION_REQUEST);\r\n    }\r\n\r\n    @SuppressLint(\"DefaultLocale\")\r\n    private void saveProfileSetting() {\r\n        final String displayName = mDisplayname.getText().toString();\r\n        final String username = mUsername.getText().toString();\r\n        final String description = mdescription.getText().toString();\r\n        //if user made a change to username\r\n        if (!setting.getU().equals(username))\r\n            checkifuserexist(username);\r\n\r\n        if (!displayName.equals(\"\") && !setting.getDn().equals(displayName))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_display_name)).setValue(displayName);\r\n        if (!setting.getDes().equals(description))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_description)).setValue(description);\r\n\r\n        if (!gmail.equals(\"\") && (setting.getE() == null || !setting.getE().equals(gmail)))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_email)).setValue(gmail);\r\n        if (!instagramProfile.equals(\"\") && (setting.getIn() == null || !setting.getIn().equals(instagramProfile)))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_instagram)).setValue(instagramProfile);\r\n        if (!facebookProfile.equals(\"\") && (setting.getFb() == null || !setting.getFb().equals(facebookProfile)))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_facebook)).setValue(facebookProfile);\r\n        if (!twitterProfile.equals(\"\") && (setting.getTw() == null || !setting.getTw().equals(twitterProfile)))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_twitter)).setValue(twitterProfile);\r\n        if (!whatsappNo.equals(\"\") && (setting.getWa() == null || !setting.getWa().equals(whatsappNo)))\r\n            myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_whatsapp)).setValue(whatsappNo);\r\n\r\n        myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_link1)).setValue(externalLink1);\r\n        myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_link2)).setValue(externalLink2);\r\n        myRef.child(getString(R.string.dbname_users)).child(userID).child(getString(R.string.field_link3)).setValue(externalLink3);\r\n\r\n        if (photoChanged) {\r\n            Log.d(TAG, \"uploadNewPhoto: uploading new PROFILE photo\" + (mContext.getString(R.string.profile_photo)));\r\n            ProgressDialog dialog = ProgressDialog.show(mContext, \"\", \"Uploading... - \", true);\r\n            FilePaths filepaths = new FilePaths();\r\n            String user_id = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n            final StorageReference storageReference = FirebaseStorage.getInstance().getReference().child(filepaths.FIREBASE_IMAGE_STORAGE + \"/\" + user_id + \"/profile_photo\");\r\n\r\n\r\n            String imgUrl2= mFirebaseMethods.compressImage(imgURL);\r\n\r\n            Bitmap bm = ImageManager.getBitmap(imgUrl2);\r\n\r\n\r\n            byte[] bytes;\r\n\r\n            bytes = ImageManager.getBytesFromBitmap(bm, 100);\r\n\r\n\r\n            UploadTask uploadTask = storageReference.putBytes(bytes);\r\n            uploadTask.addOnSuccessListener(taskSnapshot -> {\r\n                dialog.dismiss();\r\n                storageReference.getDownloadUrl().addOnSuccessListener(uri -> {\r\n                    myRef.child(mContext.getString(R.string.dbname_users)).child(userID).child(mContext.getString(R.string.profile_photo)).setValue(uri.toString());\r\n                    Toast.makeText(mContext, \"Photo Upload success\", Toast.LENGTH_SHORT).show();\r\n                });\r\n                mContext.startActivity(new Intent(mContext, ProfileActivity.class));\r\n            }).addOnFailureListener(e -> {\r\n                dialog.dismiss();\r\n                Log.d(TAG, \"onFailure: Photo Upload Failed\");\r\n                Toast.makeText(mContext, \"Photo Upload failed\", Toast.LENGTH_SHORT).show();\r\n                mContext.startActivity(new Intent(mContext, PostPhotoActivity.class));\r\n            }).addOnProgressListener(taskSnapshot -> {\r\n                double progress = (100 * taskSnapshot.getBytesTransferred()) / taskSnapshot.getTotalByteCount();\r\n                ProgressDialog.show(mContext, \"\", \"Uploading... - \" + String.format(\"%.0f\", progress) + \"%\", true);\r\n                Toast.makeText(mContext, \"Photo Upload Progress\" + String.format(\"%.0f\", progress) + \"%\", Toast.LENGTH_SHORT).show();\r\n                Log.d(TAG, \"onProgress: upload progress\" + progress + \"% done\");\r\n            });\r\n        } else mContext.startActivity(new Intent(mContext, ProfileActivity.class));\r\n    }\r\n\r\n    private void checkifuserexist(final String username) {\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference();\r\n        Query query = reference.child(getString(R.string.dbname_users))\r\n                .child(username);\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if (!dataSnapshot.exists()) {\r\n//                    add the username\r\n                    myRef.child(mContext.getString(R.string.dbname_users)).child(userID).child(mContext.getString(R.string.field_username)).setValue(username);\r\n                    Toast.makeText(EditProfile.this, \"saved username\", Toast.LENGTH_SHORT).show();\r\n                }\r\n                for (DataSnapshot singleSnapshot : dataSnapshot.getChildren()) {\r\n                    if (singleSnapshot.exists()) {\r\n                        Toast.makeText(EditProfile.this, \"That Username already exist\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    public boolean checkPermissionArray(String[] permissions) {\r\n        for (String check : permissions) if (!checkPermissions(check)) return false;\r\n        return true;\r\n    }\r\n\r\n    public boolean checkPermissions(String permission) {\r\n        int permissionRequest = ActivityCompat.checkSelfPermission(this, permission);\r\n        return permissionRequest == PackageManager.PERMISSION_GRANTED;\r\n    }\r\n\r\n    //    private void setProfileimage(){\r\n//        Log.d(TAG,\"setProfileimage: setting profile image\");\r\n//        String imgURL=\"https://www.pngmart.com/files/7/Red-Smoke-Transparent-Images-PNG.png\";\r\n//        UniversalImageLoader.setImage(imgURL, mProfilephoto,null,\"\");\r\n//    }\r\n    private void setProfileWidgets(users userSetting) {\r\n        setting = userSetting;\r\n\r\n        Glide.with(EditProfile.this)\r\n                .load(setting.getPp())\r\n                .placeholder(R.drawable.load)\r\n                .error(R.drawable.default_image2)\r\n                .placeholder(R.drawable.load)\r\n                .thumbnail(0.2f)\r\n                .into(mProfilephoto);\r\n\r\n        mDisplayname.setText(setting.getDn());\r\n        mUsername.setText(setting.getU());\r\n        mdescription.setText(setting.getDes());\r\n\r\n        if (userSetting.getl1() == null || userSetting.getl1().equals(\"\"))\r\n            link1Container.setVisibility(View.GONE);\r\n        else mLink1.setText(userSetting.getl1());\r\n        if (userSetting.getl2() == null || userSetting.getl2().equals(\"\"))\r\n            link2Container.setVisibility(View.GONE);\r\n        else mLink2.setText(userSetting.getl2());\r\n        if (userSetting.getl3() == null || userSetting.getl3().equals(\"\"))\r\n            link3Container.setVisibility(View.GONE);\r\n        else mLink3.setText(userSetting.getl3());\r\n\r\n        if (userSetting.getE() == null || userSetting.getE().equals(\"\"))\r\n            mGmailLink.setAlpha(0.5f);\r\n        else gmail = userSetting.getE();\r\n\r\n        if (userSetting.getIn() == null || userSetting.getIn().equals(\"\"))\r\n            mInstagramLink.setAlpha(0.5f);\r\n        else instagramProfile = userSetting.getIn();\r\n\r\n        if (userSetting.getFb() == null || userSetting.getFb().equals(\"\"))\r\n            mFacebookLink.setAlpha(0.5f);\r\n        else facebookProfile = userSetting.getFb();\r\n\r\n        if (userSetting.getTw() == null || userSetting.getTw().equals(\"\"))\r\n            mTwitterLink.setAlpha(0.5f);\r\n        else twitterProfile = userSetting.getTw();\r\n\r\n        if (userSetting.getWa() == null || userSetting.getWa().equals(\"\"))\r\n            mWhatsappLink.setAlpha(0.5f);\r\n        else whatsappNo = userSetting.getWa();\r\n    }\r\n\r\n    @TargetApi(19)\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        String imgPath = \"\";\r\n        if (data != null && data.getData() != null && resultCode == RESULT_OK) {\r\n            Uri uri = data.getData();\r\n            if (DocumentsContract.isDocumentUri(this, uri)) {\r\n                if (\"com.android.externalstorage.documents\".equals(uri.getAuthority())) {\r\n                    String docId = DocumentsContract.getDocumentId(uri);\r\n                    String[] split = docId.split(\":\");\r\n                    String type = split[0];\r\n                    if (\"primary\".equalsIgnoreCase(type)) {\r\n                        imgPath = Environment.getExternalStorageDirectory() + \"/\" + split[1];\r\n                        setImage(imgPath);\r\n                    } else {\r\n                        Pattern DIR_SEPORATOR = Pattern.compile(\"/\");\r\n                        Set<String> rv = new HashSet<>();\r\n                        String rawExternalStorage = System.getenv(\"EXTERNAL_STORAGE\");\r\n                        String rawSecondaryStoragesStr = System.getenv(\"SECONDARY_STORAGE\");\r\n                        String rawEmulatedStorageTarget = System.getenv(\"EMULATED_STORAGE_TARGET\");\r\n                        if (TextUtils.isEmpty(rawEmulatedStorageTarget))\r\n                            if (TextUtils.isEmpty(rawExternalStorage)) rv.add(\"/storage/sdcard0\");\r\n                            else rv.add(rawExternalStorage);\r\n                        else {\r\n                            String rawUserId;\r\n                            String path = Environment.getExternalStorageDirectory().getAbsolutePath();\r\n                            String[] folders = DIR_SEPORATOR.split(path);\r\n                            String lastFolder = folders[folders.length - 1];\r\n                            boolean isDigit = false;\r\n                            try {\r\n                                Integer.valueOf(lastFolder);\r\n                                isDigit = true;\r\n                            } catch (NumberFormatException ignored) {\r\n                            }\r\n                            rawUserId = isDigit ? lastFolder : \"\";\r\n                            if (TextUtils.isEmpty(rawUserId)) rv.add(rawEmulatedStorageTarget);\r\n                            else rv.add(rawEmulatedStorageTarget + File.separator + rawUserId);\r\n                        }\r\n                        if (!TextUtils.isEmpty(rawSecondaryStoragesStr)) {\r\n                            String[] rawSecondaryStorages = rawSecondaryStoragesStr.split(File.pathSeparator);\r\n                            Collections.addAll(rv, rawSecondaryStorages);\r\n                        }\r\n                        String[] temp = rv.toArray(new String[0]);\r\n                        for (String s : temp) {\r\n                            File tempf = new File(s + \"/\" + split[1]);\r\n                            if (tempf.exists()) {\r\n                                imgPath = s + \"/\" + split[1];\r\n                                setImage(imgPath);\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (\"com.android.providers.downloads.documents\".equals(uri.getAuthority())) {\r\n                    String id = DocumentsContract.getDocumentId(uri);\r\n                    Uri contentUri = ContentUris.withAppendedId(Uri.parse(\"content://downloads/public_downloads\"), Long.parseLong(id));\r\n                    Cursor cursor = null;\r\n                    String column = \"_data\";\r\n                    String[] projection = {column};\r\n                    try {\r\n                        cursor = this.getContentResolver().query(contentUri, projection, null, null, null);\r\n                        if (cursor != null && cursor.moveToFirst()) {\r\n                            int column_index = cursor.getColumnIndexOrThrow(column);\r\n                            imgPath = cursor.getString(column_index);\r\n                            setImage(imgPath);\r\n                        }\r\n                    } finally {\r\n                        if (cursor != null) cursor.close();\r\n                    }\r\n                } else if (\"com.android.providers.media.documents\".equals(uri.getAuthority())) {\r\n                    String docId = DocumentsContract.getDocumentId(uri);\r\n                    String[] split = docId.split(\":\");\r\n                    String type = split[0];\r\n                    Uri contentUri = null;\r\n                    if (\"image\".equals(type))\r\n                        contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\r\n                    else if (\"video\".equals(type))\r\n                        contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\r\n                    else if (\"audio\".equals(type))\r\n                        contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\r\n                    String selection = \"_id=?\";\r\n                    String[] selectionArgs = new String[]{split[1]};\r\n                    Cursor cursor = null;\r\n                    String column = \"_data\";\r\n                    String[] projection = {column};\r\n                    try {\r\n                        assert contentUri != null;\r\n                        cursor = this.getContentResolver().query(contentUri, projection, selection, selectionArgs, null);\r\n                        if (cursor != null && cursor.moveToFirst()) {\r\n                            int column_index = cursor.getColumnIndexOrThrow(column);\r\n                            imgPath = cursor.getString(column_index);\r\n                            setImage(imgPath);\r\n                        }\r\n                    } finally {\r\n                        if (cursor != null) cursor.close();\r\n                    }\r\n                } else if (\"com.google.android.apps.docs.storage\".equals(uri.getAuthority()))\r\n                    setImage(imgPath);\r\n            } else if (\"content\".equalsIgnoreCase(uri.getScheme())) {\r\n                Cursor cursor = null;\r\n                String column = \"_data\";\r\n                String[] projection = {column};\r\n                try {\r\n                    cursor = this.getContentResolver().query(uri, projection, null, null, null);\r\n                    if (cursor != null && cursor.moveToFirst()) setImage(imgPath);\r\n                } finally {\r\n                    if (cursor != null) cursor.close();\r\n                }\r\n            } else if (\"file\".equalsIgnoreCase(uri.getScheme())) {\r\n                imgPath = uri.getPath();\r\n                setImage(imgPath);\r\n            }\r\n        }\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n    }\r\n\r\n    private void setImage(String imgPath) {\r\n        Log.d(TAG, \"setImage next \" + imgPath);\r\n        imgURL = imgPath;\r\n        String mAppend = \"file:/\";\r\n        Glide.with(EditProfile.this)\r\n                .load(imgURL)\r\n                .placeholder(R.drawable.load)\r\n                .error(R.drawable.default_image2)\r\n                .placeholder(R.drawable.load)\r\n                .thumbnail(0.2f)\r\n                .into(mProfilephoto);\r\n        photoChanged = true;\r\n    }\r\n\r\n\r\n    private void setupFirebaseAuth() {\r\n        Log.d(TAG, \"setup FirebaseAuth: setting up firebase auth.\");\r\n        FirebaseDatabase mFirebaseDatabase = FirebaseDatabase.getInstance();\r\n        myRef = mFirebaseDatabase.getReference();\r\n        mAuth = FirebaseAuth.getInstance();\r\n        userID = mAuth.getCurrentUser().getUid();\r\n\r\n        mAuthListener = firebaseAuth -> {\r\n            FirebaseUser user = firebaseAuth.getCurrentUser();\r\n            if (user == null) {\r\n                Log.d(TAG, \"onAuthStateChanged:signed_out\");\r\n                Log.d(TAG, \"onAuthStateChanged: navigating to login\");\r\n                SharedPreferences settings = getSharedPreferences(\"shared preferences\", Context.MODE_PRIVATE);\r\n                new AlertDialog.Builder(mContext)\r\n                        .setTitle(\"No user logon found\")\r\n                        .setMessage(\"We will be logging u out. \\n Please try to log in again\")\r\n                        .setPositiveButton(android.R.string.ok, (dialog, which) -> {\r\n                            Intent intent = new Intent(mContext, login.class);\r\n                            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                            settings.edit().clear().apply();\r\n                            startActivity(intent);\r\n                        })\r\n                        .show();\r\n            } else Log.d(TAG, \"onAuthStateChanged: signed_in:\" + user.getUid());\r\n        };\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                //retrieve user information from the database\r\n                setProfileWidgets(dataSnapshot.child(getString(R.string.dbname_users)).child(FirebaseAuth.getInstance().getCurrentUser().getUid()).getValue(users.class));\r\n                //retrieve image for the user in question\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n        mAuth.addAuthStateListener(mAuthListener);\r\n    }\r\n\r\n    @Override\r\n    public void onStop() {\r\n        super.onStop();\r\n        if (mAuthListener != null) {\r\n            mAuth.removeAuthStateListener(mAuthListener);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        androidx.appcompat.app.AlertDialog.Builder builder = new androidx.appcompat.app.AlertDialog.Builder(this);\r\n        builder.setTitle(\"Are you sure\")\r\n                .setMessage(\"You will discard all the changes you made?\")\r\n                .setCancelable(false)\r\n                .setPositiveButton(\"Yes\", (dialog, id) -> finish())\r\n                .setNegativeButton(\"No\", (dialog, id) -> dialog.cancel())\r\n                .show();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/orion/orion/profile/Account/EditProfile.java	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/java/com/orion/orion/profile/Account/EditProfile.java	(date 1605863672980)
@@ -374,17 +374,17 @@
             builder.setTitle("Are you sure")
                     .setMessage("You will discard all the changes you made?")
                     .setCancelable(false)
-                    .setPositiveButton("Yes", (dialog, id) -> finish())
+                    .setPositiveButton("Go back", (dialog, id) -> finish())
                     .setNegativeButton("No", (dialog, id) -> dialog.cancel())
                     .show();
         });
         checkmark.setOnClickListener(v -> {
             androidx.appcompat.app.AlertDialog.Builder builder = new androidx.appcompat.app.AlertDialog.Builder(this);
             builder.setTitle("Are you sure")
-                    .setMessage("Would you not like to check changes once again?")
+                    .setMessage("Save changes you made?")
                     .setCancelable(false)
-                    .setPositiveButton("Yes", (dialog, id) -> dialog.cancel())
-                    .setNegativeButton("No", (dialog, id) -> saveProfileSetting())
+                    .setPositiveButton("Save", (dialog, id) -> saveProfileSetting())
+                    .setNegativeButton("No", (dialog, id) -> dialog.cancel())
                     .show();
         });
     }
Index: app/src/main/res/layout-v21/activity_explore.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:background=\"@color/white\">\r\n\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/relLayout1\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@drawable/pink_round_button\"\r\n        android:padding=\"10dp\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/explore\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginBottom=\"15dp\"\r\n            android:text=\"Explore\"\r\n\r\n            android:textAllCaps=\"true\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"20sp\"\r\n            android:textStyle=\"bold\" />\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@+id/explore\">\r\n\r\n            <include layout=\"@layout/snippet_searchbar\" />\r\n        </RelativeLayout>\r\n\r\n    </RelativeLayout>\r\n\r\n    <ListView\r\n        android:id=\"@+id/listview\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"10dp\"\r\n        android:layout_below=\"@+id/relLayout1\"\r\n        android:visibility=\"visible\" />\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@+id/listview\"\r\n        android:nestedScrollingEnabled=\"false\">\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/contellation\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:nestedScrollingEnabled=\"false\">\r\n\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/collapse\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:nestedScrollingEnabled=\"false\">\r\n\r\n                <include layout=\"@layout/layout_constellation\" />\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/collapse\"\r\n                android:layout_margin=\"5dp\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/up\"\r\n                    android:layout_width=\"20dp\"\r\n                    android:layout_height=\"20dp\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:src=\"@drawable/ic_arrow_up\" />\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/down\"\r\n                    android:layout_width=\"20dp\"\r\n                    android:layout_height=\"20dp\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_centerVertical=\"true\"\r\n                    android:src=\"@drawable/ic_arrow_down\"\r\n                    android:visibility=\"gone\" />\r\n\r\n            </RelativeLayout>\r\n        </RelativeLayout>\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@+id/contellation\"\r\n            android:nestedScrollingEnabled=\"false\">\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/topBox\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:nestedScrollingEnabled=\"false\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:paddingStart=\"10dp\"\r\n                    android:paddingTop=\"5dp\"\r\n                    android:paddingEnd=\"10dp\"\r\n                    android:paddingBottom=\"5dp\"\r\n                    android:weightSum=\"2\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/overall\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"center_vertical|start\"\r\n                        android:layout_weight=\"1\"\r\n                        android:text=\"Overall\"\r\n                        android:textColor=\"@color/scheme8\"\r\n                        android:textSize=\"24sp\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/domain\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"1\"\r\n                        android:layout_gravity=\"center_vertical\"\r\n                        android:gravity=\"end\"\r\n                        android:entries=\"@array/domain2\"\r\n                        android:text=\"Domain\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"24sp\" />\r\n\r\n                </LinearLayout>\r\n            </RelativeLayout>\r\n\r\n            <TextView\r\n                android:layout_below=\"@+id/topBar\"\r\n                android:layout_alignParentBottom=\"true\"\r\n                android:id=\"@+id/noPost\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:gravity=\"center\"\r\n                android:text=\"NO POSTS TO SHOW \\\\_()_/\"\r\n                android:textStyle=\"bold\"\r\n                android:textColor=\"@color/scheme8\"\r\n                android:textSize=\"18sp\"\r\n                android:visibility=\"gone\" />\r\n\r\n            <androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n                android:id=\"@+id/swiperefresh\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginBottom=\"50dp\"\r\n                android:layout_below=\"@id/topBox\"\r\n                android:background=\"@drawable/circular_corner_rectangle\"\r\n                android:backgroundTint=\"@color/white\">\r\n\r\n                <androidx.recyclerview.widget.RecyclerView\r\n                    android:id=\"@+id/exploreRv\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:layout_marginBottom=\"50dp\"\r\n                    android:nestedScrollingEnabled=\"false\"\r\n                    android:visibility=\"visible\"\r\n                    app:layoutManager=\"androidx.recyclerview.widget.GridLayoutManager\"\r\n                    app:spanCount=\"3\" />\r\n            </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>\r\n        </RelativeLayout>\r\n    </RelativeLayout>\r\n\r\n    <include layout=\"@layout/layout_bottom_navigation_view\" />\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout-v21/activity_explore.xml	(revision 5e83f58689bec79d1fa2a94eb2a36d3d32a2176e)
+++ app/src/main/res/layout-v21/activity_explore.xml	(date 1605880254305)
@@ -39,7 +39,7 @@
     <ListView
         android:id="@+id/listview"
         android:layout_width="match_parent"
-        android:layout_height="10dp"
+        android:layout_height="wrap_content"
         android:layout_below="@+id/relLayout1"
         android:visibility="visible" />
 
